(self.webpackChunkmfe_1=self.webpackChunkmfe_1||[]).push([[181],{90164:(b,D,u)=>{const d=u(83038),l=Symbol("max"),g=Symbol("length"),I=Symbol("lengthCalculator"),R=Symbol("allowStale"),c=Symbol("maxAge"),a=Symbol("dispose"),i=Symbol("noDisposeOnSet"),y=Symbol("lruList"),E=Symbol("cache"),A=Symbol("updateAgeOnGet"),T=()=>1,$=(W,N,j)=>{const P=W[E].get(N);if(P){const H=P.value;if(_(W,H)){if(h(W,P),!W[R])return}else j&&(W[A]&&(P.value.now=Date.now()),W[y].unshiftNode(P));return H.value}},_=(W,N)=>{if(!N||!N.maxAge&&!W[c])return!1;const j=Date.now()-N.now;return N.maxAge?j>N.maxAge:W[c]&&j>W[c]},Z=W=>{if(W[g]>W[l])for(let N=W[y].tail;W[g]>W[l]&&null!==N;){const j=N.prev;h(W,N),N=j}},h=(W,N)=>{if(N){const j=N.value;W[a]&&W[a](j.key,j.value),W[g]-=j.length,W[E].delete(j.key),W[y].removeNode(N)}};class V{constructor(N,j,P,H,U){this.key=N,this.value=j,this.length=P,this.now=H,this.maxAge=U||0}}const Y=(W,N,j,P)=>{let H=j.value;_(W,H)&&(h(W,j),W[R]||(H=void 0)),H&&N.call(P,H.value,H.key,W)};b.exports=class v{constructor(N){if("number"==typeof N&&(N={max:N}),N||(N={}),N.max&&("number"!=typeof N.max||N.max<0))throw new TypeError("max must be a non-negative number");this[l]=N.max||1/0;const P=N.length||T;if(this[I]="function"!=typeof P?T:P,this[R]=N.stale||!1,N.maxAge&&"number"!=typeof N.maxAge)throw new TypeError("maxAge must be a number");this[c]=N.maxAge||0,this[a]=N.dispose,this[i]=N.noDisposeOnSet||!1,this[A]=N.updateAgeOnGet||!1,this.reset()}set max(N){if("number"!=typeof N||N<0)throw new TypeError("max must be a non-negative number");this[l]=N||1/0,Z(this)}get max(){return this[l]}set allowStale(N){this[R]=!!N}get allowStale(){return this[R]}set maxAge(N){if("number"!=typeof N)throw new TypeError("maxAge must be a non-negative number");this[c]=N,Z(this)}get maxAge(){return this[c]}set lengthCalculator(N){"function"!=typeof N&&(N=T),N!==this[I]&&(this[I]=N,this[g]=0,this[y].forEach(j=>{j.length=this[I](j.value,j.key),this[g]+=j.length})),Z(this)}get lengthCalculator(){return this[I]}get length(){return this[g]}get itemCount(){return this[y].length}rforEach(N,j){j=j||this;for(let P=this[y].tail;null!==P;){const H=P.prev;Y(this,N,P,j),P=H}}forEach(N,j){j=j||this;for(let P=this[y].head;null!==P;){const H=P.next;Y(this,N,P,j),P=H}}keys(){return this[y].toArray().map(N=>N.key)}values(){return this[y].toArray().map(N=>N.value)}reset(){this[a]&&this[y]&&this[y].length&&this[y].forEach(N=>this[a](N.key,N.value)),this[E]=new Map,this[y]=new d,this[g]=0}dump(){return this[y].map(N=>!_(this,N)&&{k:N.key,v:N.value,e:N.now+(N.maxAge||0)}).toArray().filter(N=>N)}dumpLru(){return this[y]}set(N,j,P){if((P=P||this[c])&&"number"!=typeof P)throw new TypeError("maxAge must be a number");const H=P?Date.now():0,U=this[I](j,N);if(this[E].has(N)){if(U>this[l])return h(this,this[E].get(N)),!1;const se=this[E].get(N).value;return this[a]&&(this[i]||this[a](N,se.value)),se.now=H,se.maxAge=P,se.value=j,this[g]+=U-se.length,se.length=U,this.get(N),Z(this),!0}const ie=new V(N,j,U,H,P);return ie.length>this[l]?(this[a]&&this[a](N,j),!1):(this[g]+=ie.length,this[y].unshift(ie),this[E].set(N,this[y].head),Z(this),!0)}has(N){if(!this[E].has(N))return!1;const j=this[E].get(N).value;return!_(this,j)}get(N){return $(this,N,!0)}peek(N){return $(this,N,!1)}pop(){const N=this[y].tail;return N?(h(this,N),N.value):null}del(N){h(this,this[E].get(N))}load(N){this.reset();const j=Date.now();for(let P=N.length-1;P>=0;P--){const H=N[P],U=H.e||0;if(0===U)this.set(H.k,H.v);else{const ie=U-j;ie>0&&this.set(H.k,H.v,ie)}}}prune(){this[E].forEach((N,j)=>$(this,j,!1))}}},33052:(b,D,u)=>{const d=Symbol("SemVer ANY");class l{static get ANY(){return d}constructor(A,T){if(T=g(T),A instanceof l){if(A.loose===!!T.loose)return A;A=A.value}A=A.trim().split(/\s+/).join(" "),a("comparator",A,T),this.options=T,this.loose=!!T.loose,this.parse(A),this.value=this.semver===d?"":this.operator+this.semver.version,a("comp",this)}parse(A){const v=A.match(this.options.loose?I[R.COMPARATORLOOSE]:I[R.COMPARATOR]);if(!v)throw new TypeError(`Invalid comparator: ${A}`);this.operator=void 0!==v[1]?v[1]:"","="===this.operator&&(this.operator=""),this.semver=v[2]?new i(v[2],this.options.loose):d}toString(){return this.value}test(A){if(a("Comparator.test",A,this.options.loose),this.semver===d||A===d)return!0;if("string"==typeof A)try{A=new i(A,this.options)}catch{return!1}return c(A,this.operator,this.semver,this.options)}intersects(A,T){if(!(A instanceof l))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new y(A.value,T).test(this.value):""===A.operator?""===A.value||new y(this.value,T).test(A.semver):!((T=g(T)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===A.value)||!T.includePrerelease&&(this.value.startsWith("<0.0.0")||A.value.startsWith("<0.0.0"))||!(this.operator.startsWith(">")&&A.operator.startsWith(">")||this.operator.startsWith("<")&&A.operator.startsWith("<")||this.semver.version===A.semver.version&&this.operator.includes("=")&&A.operator.includes("=")||c(this.semver,"<",A.semver,T)&&this.operator.startsWith(">")&&A.operator.startsWith("<")||c(this.semver,">",A.semver,T)&&this.operator.startsWith("<")&&A.operator.startsWith(">")))}}b.exports=l;const g=u(62429),{safeRe:I,t:R}=u(12754),c=u(30780),a=u(59342),i=u(91381),y=u(82792)},82792:(b,D,u)=>{class d{constructor(C,K){if(K=I(K),C instanceof d)return C.loose===!!K.loose&&C.includePrerelease===!!K.includePrerelease?C:new d(C.raw,K);if(C instanceof R)return this.raw=C.value,this.set=[[C]],this.format(),this;if(this.options=K,this.loose=!!K.loose,this.includePrerelease=!!K.includePrerelease,this.raw=C.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(G=>this.parseRange(G.trim())).filter(G=>G.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const G=this.set[0];if(this.set=this.set.filter(B=>!_(B[0])),0===this.set.length)this.set=[G];else if(this.set.length>1)for(const B of this.set)if(1===B.length&&Z(B[0])){this.set=[B];break}}this.format()}format(){return this.range=this.set.map(C=>C.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(C){const G=((this.options.includePrerelease&&v)|(this.options.loose&&$))+":"+C,B=g.get(G);if(B)return B;const F=this.options.loose;C=C.replace(F?i[y.HYPHENRANGELOOSE]:i[y.HYPHENRANGE],se(this.options.includePrerelease)),c("hyphen replace",C),C=C.replace(i[y.COMPARATORTRIM],E),c("comparator trim",C),C=C.replace(i[y.TILDETRIM],A),c("tilde trim",C),C=C.replace(i[y.CARETTRIM],T),c("caret trim",C);let J=C.split(" ").map(ee=>V(ee,this.options)).join(" ").split(/\s+/).map(ee=>he(ee,this.options));F&&(J=J.filter(ee=>(c("loose invalid filter",ee,this.options),!!ee.match(i[y.COMPARATORLOOSE])))),c("range list",J);const X=new Map,q=J.map(ee=>new R(ee,this.options));for(const ee of q){if(_(ee))return[ee];X.set(ee.value,ee)}X.size>1&&X.has("")&&X.delete("");const oe=[...X.values()];return g.set(G,oe),oe}intersects(C,K){if(!(C instanceof d))throw new TypeError("a Range is required");return this.set.some(G=>h(G,K)&&C.set.some(B=>h(B,K)&&G.every(F=>B.every(k=>F.intersects(k,K)))))}test(C){if(!C)return!1;if("string"==typeof C)try{C=new a(C,this.options)}catch{return!1}for(let K=0;K<this.set.length;K++)if(Ce(this.set[K],C,this.options))return!0;return!1}}b.exports=d;const g=new(u(90164))({max:1e3}),I=u(62429),R=u(33052),c=u(59342),a=u(91381),{safeRe:i,t:y,comparatorTrimReplace:E,tildeTrimReplace:A,caretTrimReplace:T}=u(12754),{FLAG_INCLUDE_PRERELEASE:v,FLAG_LOOSE:$}=u(76521),_=w=>"<0.0.0-0"===w.value,Z=w=>""===w.value,h=(w,C)=>{let K=!0;const G=w.slice();let B=G.pop();for(;K&&G.length;)K=G.every(F=>B.intersects(F,C)),B=G.pop();return K},V=(w,C)=>(c("comp",w,C),w=j(w,C),c("caret",w),w=W(w,C),c("tildes",w),w=H(w,C),c("xrange",w),w=ie(w,C),c("stars",w),w),Y=w=>!w||"x"===w.toLowerCase()||"*"===w,W=(w,C)=>w.trim().split(/\s+/).map(K=>N(K,C)).join(" "),N=(w,C)=>w.replace(C.loose?i[y.TILDELOOSE]:i[y.TILDE],(G,B,F,k,J)=>{let X;return c("tilde",w,G,B,F,k,J),Y(B)?X="":Y(F)?X=`>=${B}.0.0 <${+B+1}.0.0-0`:Y(k)?X=`>=${B}.${F}.0 <${B}.${+F+1}.0-0`:J?(c("replaceTilde pr",J),X=`>=${B}.${F}.${k}-${J} <${B}.${+F+1}.0-0`):X=`>=${B}.${F}.${k} <${B}.${+F+1}.0-0`,c("tilde return",X),X}),j=(w,C)=>w.trim().split(/\s+/).map(K=>P(K,C)).join(" "),P=(w,C)=>{c("caret",w,C);const G=C.includePrerelease?"-0":"";return w.replace(C.loose?i[y.CARETLOOSE]:i[y.CARET],(B,F,k,J,X)=>{let q;return c("caret",w,B,F,k,J,X),Y(F)?q="":Y(k)?q=`>=${F}.0.0${G} <${+F+1}.0.0-0`:Y(J)?q="0"===F?`>=${F}.${k}.0${G} <${F}.${+k+1}.0-0`:`>=${F}.${k}.0${G} <${+F+1}.0.0-0`:X?(c("replaceCaret pr",X),q="0"===F?"0"===k?`>=${F}.${k}.${J}-${X} <${F}.${k}.${+J+1}-0`:`>=${F}.${k}.${J}-${X} <${F}.${+k+1}.0-0`:`>=${F}.${k}.${J}-${X} <${+F+1}.0.0-0`):(c("no pr"),q="0"===F?"0"===k?`>=${F}.${k}.${J}${G} <${F}.${k}.${+J+1}-0`:`>=${F}.${k}.${J}${G} <${F}.${+k+1}.0-0`:`>=${F}.${k}.${J} <${+F+1}.0.0-0`),c("caret return",q),q})},H=(w,C)=>(c("replaceXRanges",w,C),w.split(/\s+/).map(K=>U(K,C)).join(" ")),U=(w,C)=>(w=w.trim()).replace(C.loose?i[y.XRANGELOOSE]:i[y.XRANGE],(G,B,F,k,J,X)=>{c("xRange",w,G,B,F,k,J,X);const q=Y(F),oe=q||Y(k),ee=oe||Y(J);return"="===B&&ee&&(B=""),X=C.includePrerelease?"-0":"",q?G=">"===B||"<"===B?"<0.0.0-0":"*":B&&ee?(oe&&(k=0),J=0,">"===B?(B=">=",oe?(F=+F+1,k=0,J=0):(k=+k+1,J=0)):"<="===B&&(B="<",oe?F=+F+1:k=+k+1),"<"===B&&(X="-0"),G=`${B+F}.${k}.${J}${X}`):oe?G=`>=${F}.0.0${X} <${+F+1}.0.0-0`:ee&&(G=`>=${F}.${k}.0${X} <${F}.${+k+1}.0-0`),c("xRange return",G),G}),ie=(w,C)=>(c("replaceStars",w,C),w.trim().replace(i[y.STAR],"")),he=(w,C)=>(c("replaceGTE0",w,C),w.trim().replace(i[C.includePrerelease?y.GTE0PRE:y.GTE0],"")),se=w=>(C,K,G,B,F,k,J,X,q,oe,ee,me,dt)=>`${K=Y(G)?"":Y(B)?`>=${G}.0.0${w?"-0":""}`:Y(F)?`>=${G}.${B}.0${w?"-0":""}`:k?`>=${K}`:`>=${K}${w?"-0":""}`} ${X=Y(q)?"":Y(oe)?`<${+q+1}.0.0-0`:Y(ee)?`<${q}.${+oe+1}.0-0`:me?`<=${q}.${oe}.${ee}-${me}`:w?`<${q}.${oe}.${+ee+1}-0`:`<=${X}`}`.trim(),Ce=(w,C,K)=>{for(let G=0;G<w.length;G++)if(!w[G].test(C))return!1;if(C.prerelease.length&&!K.includePrerelease){for(let G=0;G<w.length;G++)if(c(w[G].semver),w[G].semver!==R.ANY&&w[G].semver.prerelease.length>0){const B=w[G].semver;if(B.major===C.major&&B.minor===C.minor&&B.patch===C.patch)return!0}return!1}return!0}},91381:(b,D,u)=>{const d=u(59342),{MAX_LENGTH:l,MAX_SAFE_INTEGER:g}=u(76521),{safeRe:I,t:R}=u(12754),c=u(62429),{compareIdentifiers:a}=u(71828);class i{constructor(E,A){if(A=c(A),E instanceof i){if(E.loose===!!A.loose&&E.includePrerelease===!!A.includePrerelease)return E;E=E.version}else if("string"!=typeof E)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof E}".`);if(E.length>l)throw new TypeError(`version is longer than ${l} characters`);d("SemVer",E,A),this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease;const T=E.trim().match(A.loose?I[R.LOOSE]:I[R.FULL]);if(!T)throw new TypeError(`Invalid Version: ${E}`);if(this.raw=E,this.major=+T[1],this.minor=+T[2],this.patch=+T[3],this.major>g||this.major<0)throw new TypeError("Invalid major version");if(this.minor>g||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>g||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=T[4]?T[4].split(".").map(v=>{if(/^[0-9]+$/.test(v)){const $=+v;if($>=0&&$<g)return $}return v}):[],this.build=T[5]?T[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(E){if(d("SemVer.compare",this.version,this.options,E),!(E instanceof i)){if("string"==typeof E&&E===this.version)return 0;E=new i(E,this.options)}return E.version===this.version?0:this.compareMain(E)||this.comparePre(E)}compareMain(E){return E instanceof i||(E=new i(E,this.options)),a(this.major,E.major)||a(this.minor,E.minor)||a(this.patch,E.patch)}comparePre(E){if(E instanceof i||(E=new i(E,this.options)),this.prerelease.length&&!E.prerelease.length)return-1;if(!this.prerelease.length&&E.prerelease.length)return 1;if(!this.prerelease.length&&!E.prerelease.length)return 0;let A=0;do{const T=this.prerelease[A],v=E.prerelease[A];if(d("prerelease compare",A,T,v),void 0===T&&void 0===v)return 0;if(void 0===v)return 1;if(void 0===T)return-1;if(T!==v)return a(T,v)}while(++A)}compareBuild(E){E instanceof i||(E=new i(E,this.options));let A=0;do{const T=this.build[A],v=E.build[A];if(d("prerelease compare",A,T,v),void 0===T&&void 0===v)return 0;if(void 0===v)return 1;if(void 0===T)return-1;if(T!==v)return a(T,v)}while(++A)}inc(E,A,T){switch(E){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",A,T);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",A,T);break;case"prepatch":this.prerelease.length=0,this.inc("patch",A,T),this.inc("pre",A,T);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",A,T),this.inc("pre",A,T);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const v=Number(T)?1:0;if(!A&&!1===T)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[v];else{let $=this.prerelease.length;for(;--$>=0;)"number"==typeof this.prerelease[$]&&(this.prerelease[$]++,$=-2);if(-1===$){if(A===this.prerelease.join(".")&&!1===T)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(v)}}if(A){let $=[A,v];!1===T&&($=[A]),0===a(this.prerelease[0],A)?isNaN(this.prerelease[1])&&(this.prerelease=$):this.prerelease=$}break}default:throw new Error(`invalid increment argument: ${E}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}b.exports=i},32547:(b,D,u)=>{const d=u(94238);b.exports=(g,I)=>{const R=d(g.trim().replace(/^[=v]+/,""),I);return R?R.version:null}},30780:(b,D,u)=>{const d=u(78334),l=u(16458),g=u(810),I=u(8723),R=u(10375),c=u(23476);b.exports=(i,y,E,A)=>{switch(y){case"===":return"object"==typeof i&&(i=i.version),"object"==typeof E&&(E=E.version),i===E;case"!==":return"object"==typeof i&&(i=i.version),"object"==typeof E&&(E=E.version),i!==E;case"":case"=":case"==":return d(i,E,A);case"!=":return l(i,E,A);case">":return g(i,E,A);case">=":return I(i,E,A);case"<":return R(i,E,A);case"<=":return c(i,E,A);default:throw new TypeError(`Invalid operator: ${y}`)}}},50159:(b,D,u)=>{const d=u(91381),l=u(94238),{safeRe:g,t:I}=u(12754);b.exports=(c,a)=>{if(c instanceof d)return c;if("number"==typeof c&&(c=String(c)),"string"!=typeof c)return null;let i=null;if((a=a||{}).rtl){let y;for(;(y=g[I.COERCERTL].exec(c))&&(!i||i.index+i[0].length!==c.length);)(!i||y.index+y[0].length!==i.index+i[0].length)&&(i=y),g[I.COERCERTL].lastIndex=y.index+y[1].length+y[2].length;g[I.COERCERTL].lastIndex=-1}else i=c.match(g[I.COERCE]);return null===i?null:l(`${i[2]}.${i[3]||"0"}.${i[4]||"0"}`,a)}},19587:(b,D,u)=>{const d=u(91381);b.exports=(g,I,R)=>{const c=new d(g,R),a=new d(I,R);return c.compare(a)||c.compareBuild(a)}},60585:(b,D,u)=>{const d=u(83060);b.exports=(g,I)=>d(g,I,!0)},83060:(b,D,u)=>{const d=u(91381);b.exports=(g,I,R)=>new d(g,R).compare(new d(I,R))},35741:(b,D,u)=>{const d=u(94238);b.exports=(g,I)=>{const R=d(g,null,!0),c=d(I,null,!0),a=R.compare(c);if(0===a)return null;const i=a>0,y=i?R:c,E=i?c:R,A=!!y.prerelease.length;if(E.prerelease.length&&!A)return E.patch||E.minor?y.patch?"patch":y.minor?"minor":"major":"major";const v=A?"pre":"";return R.major!==c.major?v+"major":R.minor!==c.minor?v+"minor":R.patch!==c.patch?v+"patch":"prerelease"}},78334:(b,D,u)=>{const d=u(83060);b.exports=(g,I,R)=>0===d(g,I,R)},810:(b,D,u)=>{const d=u(83060);b.exports=(g,I,R)=>d(g,I,R)>0},8723:(b,D,u)=>{const d=u(83060);b.exports=(g,I,R)=>d(g,I,R)>=0},27579:(b,D,u)=>{const d=u(91381);b.exports=(g,I,R,c,a)=>{"string"==typeof R&&(a=c,c=R,R=void 0);try{return new d(g instanceof d?g.version:g,R).inc(I,c,a).version}catch{return null}}},10375:(b,D,u)=>{const d=u(83060);b.exports=(g,I,R)=>d(g,I,R)<0},23476:(b,D,u)=>{const d=u(83060);b.exports=(g,I,R)=>d(g,I,R)<=0},1553:(b,D,u)=>{const d=u(91381);b.exports=(g,I)=>new d(g,I).major},22818:(b,D,u)=>{const d=u(91381);b.exports=(g,I)=>new d(g,I).minor},16458:(b,D,u)=>{const d=u(83060);b.exports=(g,I,R)=>0!==d(g,I,R)},94238:(b,D,u)=>{const d=u(91381);b.exports=(g,I,R=!1)=>{if(g instanceof d)return g;try{return new d(g,I)}catch(c){if(!R)return null;throw c}}},79482:(b,D,u)=>{const d=u(91381);b.exports=(g,I)=>new d(g,I).patch},18693:(b,D,u)=>{const d=u(94238);b.exports=(g,I)=>{const R=d(g,I);return R&&R.prerelease.length?R.prerelease:null}},90700:(b,D,u)=>{const d=u(83060);b.exports=(g,I,R)=>d(I,g,R)},57312:(b,D,u)=>{const d=u(19587);b.exports=(g,I)=>g.sort((R,c)=>d(c,R,I))},97780:(b,D,u)=>{const d=u(82792);b.exports=(g,I,R)=>{try{I=new d(I,R)}catch{return!1}return I.test(g)}},81975:(b,D,u)=>{const d=u(19587);b.exports=(g,I)=>g.sort((R,c)=>d(R,c,I))},63008:(b,D,u)=>{const d=u(94238);b.exports=(g,I)=>{const R=d(g,I);return R?R.version:null}},52129:(b,D,u)=>{const d=u(12754),l=u(76521),g=u(91381),I=u(71828),R=u(94238),c=u(63008),a=u(32547),i=u(27579),y=u(35741),E=u(1553),A=u(22818),T=u(79482),v=u(18693),$=u(83060),_=u(90700),Z=u(60585),h=u(19587),V=u(81975),Y=u(57312),W=u(810),N=u(10375),j=u(78334),P=u(16458),H=u(8723),U=u(23476),ie=u(30780),he=u(50159),se=u(33052),Ce=u(82792),w=u(97780),C=u(77040),K=u(23046),G=u(45891),B=u(21313),F=u(17985),k=u(34032),J=u(82952),X=u(8043),q=u(90308),oe=u(434),ee=u(51502);b.exports={parse:R,valid:c,clean:a,inc:i,diff:y,major:E,minor:A,patch:T,prerelease:v,compare:$,rcompare:_,compareLoose:Z,compareBuild:h,sort:V,rsort:Y,gt:W,lt:N,eq:j,neq:P,gte:H,lte:U,cmp:ie,coerce:he,Comparator:se,Range:Ce,satisfies:w,toComparators:C,maxSatisfying:K,minSatisfying:G,minVersion:B,validRange:F,outside:k,gtr:J,ltr:X,intersects:q,simplifyRange:oe,subset:ee,SemVer:g,re:d.re,src:d.src,tokens:d.t,SEMVER_SPEC_VERSION:l.SEMVER_SPEC_VERSION,RELEASE_TYPES:l.RELEASE_TYPES,compareIdentifiers:I.compareIdentifiers,rcompareIdentifiers:I.rcompareIdentifiers}},76521:b=>{b.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},59342:b=>{const D="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...u)=>console.error("SEMVER",...u):()=>{};b.exports=D},71828:b=>{const D=/^[0-9]+$/,u=(l,g)=>{const I=D.test(l),R=D.test(g);return I&&R&&(l=+l,g=+g),l===g?0:I&&!R?-1:R&&!I?1:l<g?-1:1};b.exports={compareIdentifiers:u,rcompareIdentifiers:(l,g)=>u(g,l)}},62429:b=>{const D=Object.freeze({loose:!0}),u=Object.freeze({});b.exports=l=>l?"object"!=typeof l?D:l:u},12754:(b,D,u)=>{const{MAX_SAFE_COMPONENT_LENGTH:d,MAX_SAFE_BUILD_LENGTH:l,MAX_LENGTH:g}=u(76521),I=u(59342),R=(D=b.exports={}).re=[],c=D.safeRe=[],a=D.src=[],i=D.t={};let y=0;const E="[a-zA-Z0-9-]",A=[["\\s",1],["\\d",g],[E,l]],v=($,_,Z)=>{const h=($=>{for(const[_,Z]of A)$=$.split(`${_}*`).join(`${_}{0,${Z}}`).split(`${_}+`).join(`${_}{1,${Z}}`);return $})(_),V=y++;I($,V,_),i[$]=V,a[V]=_,R[V]=new RegExp(_,Z?"g":void 0),c[V]=new RegExp(h,Z?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${E}*`),v("MAINVERSION",`(${a[i.NUMERICIDENTIFIER]})\\.(${a[i.NUMERICIDENTIFIER]})\\.(${a[i.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${a[i.NUMERICIDENTIFIERLOOSE]})\\.(${a[i.NUMERICIDENTIFIERLOOSE]})\\.(${a[i.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${a[i.NUMERICIDENTIFIER]}|${a[i.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${a[i.NUMERICIDENTIFIERLOOSE]}|${a[i.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${a[i.PRERELEASEIDENTIFIER]}(?:\\.${a[i.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${a[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[i.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${E}+`),v("BUILD",`(?:\\+(${a[i.BUILDIDENTIFIER]}(?:\\.${a[i.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${a[i.MAINVERSION]}${a[i.PRERELEASE]}?${a[i.BUILD]}?`),v("FULL",`^${a[i.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${a[i.MAINVERSIONLOOSE]}${a[i.PRERELEASELOOSE]}?${a[i.BUILD]}?`),v("LOOSE",`^${a[i.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${a[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${a[i.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${a[i.XRANGEIDENTIFIER]})(?:\\.(${a[i.XRANGEIDENTIFIER]})(?:\\.(${a[i.XRANGEIDENTIFIER]})(?:${a[i.PRERELEASE]})?${a[i.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${a[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[i.XRANGEIDENTIFIERLOOSE]})(?:${a[i.PRERELEASELOOSE]})?${a[i.BUILD]}?)?)?`),v("XRANGE",`^${a[i.GTLT]}\\s*${a[i.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${a[i.GTLT]}\\s*${a[i.XRANGEPLAINLOOSE]}$`),v("COERCE",`(^|[^\\d])(\\d{1,${d}})(?:\\.(\\d{1,${d}}))?(?:\\.(\\d{1,${d}}))?(?:$|[^\\d])`),v("COERCERTL",a[i.COERCE],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${a[i.LONETILDE]}\\s+`,!0),D.tildeTrimReplace="$1~",v("TILDE",`^${a[i.LONETILDE]}${a[i.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${a[i.LONETILDE]}${a[i.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${a[i.LONECARET]}\\s+`,!0),D.caretTrimReplace="$1^",v("CARET",`^${a[i.LONECARET]}${a[i.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${a[i.LONECARET]}${a[i.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${a[i.GTLT]}\\s*(${a[i.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${a[i.GTLT]}\\s*(${a[i.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${a[i.GTLT]}\\s*(${a[i.LOOSEPLAIN]}|${a[i.XRANGEPLAIN]})`,!0),D.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${a[i.XRANGEPLAIN]})\\s+-\\s+(${a[i.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${a[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[i.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},82952:(b,D,u)=>{const d=u(34032);b.exports=(g,I,R)=>d(g,I,">",R)},90308:(b,D,u)=>{const d=u(82792);b.exports=(g,I,R)=>(g=new d(g,R),I=new d(I,R),g.intersects(I,R))},8043:(b,D,u)=>{const d=u(34032);b.exports=(g,I,R)=>d(g,I,"<",R)},23046:(b,D,u)=>{const d=u(91381),l=u(82792);b.exports=(I,R,c)=>{let a=null,i=null,y=null;try{y=new l(R,c)}catch{return null}return I.forEach(E=>{y.test(E)&&(!a||-1===i.compare(E))&&(a=E,i=new d(a,c))}),a}},45891:(b,D,u)=>{const d=u(91381),l=u(82792);b.exports=(I,R,c)=>{let a=null,i=null,y=null;try{y=new l(R,c)}catch{return null}return I.forEach(E=>{y.test(E)&&(!a||1===i.compare(E))&&(a=E,i=new d(a,c))}),a}},21313:(b,D,u)=>{const d=u(91381),l=u(82792),g=u(810);b.exports=(R,c)=>{R=new l(R,c);let a=new d("0.0.0");if(R.test(a)||(a=new d("0.0.0-0"),R.test(a)))return a;a=null;for(let i=0;i<R.set.length;++i){let E=null;R.set[i].forEach(A=>{const T=new d(A.semver.version);switch(A.operator){case">":0===T.prerelease.length?T.patch++:T.prerelease.push(0),T.raw=T.format();case"":case">=":(!E||g(T,E))&&(E=T);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${A.operator}`)}}),E&&(!a||g(a,E))&&(a=E)}return a&&R.test(a)?a:null}},34032:(b,D,u)=>{const d=u(91381),l=u(33052),{ANY:g}=l,I=u(82792),R=u(97780),c=u(810),a=u(10375),i=u(23476),y=u(8723);b.exports=(A,T,v,$)=>{let _,Z,h,V,Y;switch(A=new d(A,$),T=new I(T,$),v){case">":_=c,Z=i,h=a,V=">",Y=">=";break;case"<":_=a,Z=y,h=c,V="<",Y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(R(A,T,$))return!1;for(let W=0;W<T.set.length;++W){let j=null,P=null;if(T.set[W].forEach(H=>{H.semver===g&&(H=new l(">=0.0.0")),j=j||H,P=P||H,_(H.semver,j.semver,$)?j=H:h(H.semver,P.semver,$)&&(P=H)}),j.operator===V||j.operator===Y||(!P.operator||P.operator===V)&&Z(A,P.semver))return!1;if(P.operator===Y&&h(A,P.semver))return!1}return!0}},434:(b,D,u)=>{const d=u(97780),l=u(83060);b.exports=(g,I,R)=>{const c=[];let a=null,i=null;const y=g.sort((v,$)=>l(v,$,R));for(const v of y)d(v,I,R)?(i=v,a||(a=v)):(i&&c.push([a,i]),i=null,a=null);a&&c.push([a,null]);const E=[];for(const[v,$]of c)E.push(v===$?v:$||v!==y[0]?$?v===y[0]?`<=${$}`:`${v} - ${$}`:`>=${v}`:"*");const A=E.join(" || "),T="string"==typeof I.raw?I.raw:String(I);return A.length<T.length?A:I}},51502:(b,D,u)=>{const d=u(82792),l=u(33052),{ANY:g}=l,I=u(97780),R=u(83060),a=[new l(">=0.0.0-0")],i=[new l(">=0.0.0")],y=(T,v,$)=>{if(T===v)return!0;if(1===T.length&&T[0].semver===g){if(1===v.length&&v[0].semver===g)return!0;T=$.includePrerelease?a:i}if(1===v.length&&v[0].semver===g){if($.includePrerelease)return!0;v=i}const _=new Set;let Z,h,V;for(const U of T)">"===U.operator||">="===U.operator?Z=E(Z,U,$):"<"===U.operator||"<="===U.operator?h=A(h,U,$):_.add(U.semver);if(_.size>1)return null;if(Z&&h){if(V=R(Z.semver,h.semver,$),V>0)return null;if(0===V&&(">="!==Z.operator||"<="!==h.operator))return null}for(const U of _){if(Z&&!I(U,String(Z),$)||h&&!I(U,String(h),$))return null;for(const ie of v)if(!I(U,String(ie),$))return!1;return!0}let Y,W,N,j,P=!(!h||$.includePrerelease||!h.semver.prerelease.length)&&h.semver,H=!(!Z||$.includePrerelease||!Z.semver.prerelease.length)&&Z.semver;P&&1===P.prerelease.length&&"<"===h.operator&&0===P.prerelease[0]&&(P=!1);for(const U of v){if(j=j||">"===U.operator||">="===U.operator,N=N||"<"===U.operator||"<="===U.operator,Z)if(H&&U.semver.prerelease&&U.semver.prerelease.length&&U.semver.major===H.major&&U.semver.minor===H.minor&&U.semver.patch===H.patch&&(H=!1),">"===U.operator||">="===U.operator){if(Y=E(Z,U,$),Y===U&&Y!==Z)return!1}else if(">="===Z.operator&&!I(Z.semver,String(U),$))return!1;if(h)if(P&&U.semver.prerelease&&U.semver.prerelease.length&&U.semver.major===P.major&&U.semver.minor===P.minor&&U.semver.patch===P.patch&&(P=!1),"<"===U.operator||"<="===U.operator){if(W=A(h,U,$),W===U&&W!==h)return!1}else if("<="===h.operator&&!I(h.semver,String(U),$))return!1;if(!U.operator&&(h||Z)&&0!==V)return!1}return!(Z&&N&&!h&&0!==V||h&&j&&!Z&&0!==V||H||P)},E=(T,v,$)=>{if(!T)return v;const _=R(T.semver,v.semver,$);return _>0?T:_<0||">"===v.operator&&">="===T.operator?v:T},A=(T,v,$)=>{if(!T)return v;const _=R(T.semver,v.semver,$);return _<0?T:_>0||"<"===v.operator&&"<="===T.operator?v:T};b.exports=(T,v,$={})=>{if(T===v)return!0;T=new d(T,$),v=new d(v,$);let _=!1;e:for(const Z of T.set){for(const h of v.set){const V=y(Z,h,$);if(_=_||null!==V,V)continue e}if(_)return!1}return!0}},77040:(b,D,u)=>{const d=u(82792);b.exports=(g,I)=>new d(g,I).set.map(R=>R.map(c=>c.value).join(" ").trim().split(" "))},17985:(b,D,u)=>{const d=u(82792);b.exports=(g,I)=>{try{return new d(g,I).range||"*"}catch{return null}}},81644:b=>{b.exports=function(D){D.prototype[Symbol.iterator]=function*(){for(let u=this.head;u;u=u.next)yield u.value}}},83038:(b,D,u)=>{function d(c){var a=this;if(a instanceof d||(a=new d),a.tail=null,a.head=null,a.length=0,c&&"function"==typeof c.forEach)c.forEach(function(E){a.push(E)});else if(arguments.length>0)for(var i=0,y=arguments.length;i<y;i++)a.push(arguments[i]);return a}function l(c,a,i){var y=a===c.head?new R(i,null,a,c):new R(i,a,a.next,c);return null===y.next&&(c.tail=y),null===y.prev&&(c.head=y),c.length++,y}function g(c,a){c.tail=new R(a,c.tail,null,c),c.head||(c.head=c.tail),c.length++}function I(c,a){c.head=new R(a,null,c.head,c),c.tail||(c.tail=c.head),c.length++}function R(c,a,i,y){if(!(this instanceof R))return new R(c,a,i,y);this.list=y,this.value=c,a?(a.next=this,this.prev=a):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}b.exports=d,d.Node=R,d.create=d,d.prototype.removeNode=function(c){if(c.list!==this)throw new Error("removing node which does not belong to this list");var a=c.next,i=c.prev;return a&&(a.prev=i),i&&(i.next=a),c===this.head&&(this.head=a),c===this.tail&&(this.tail=i),c.list.length--,c.next=null,c.prev=null,c.list=null,a},d.prototype.unshiftNode=function(c){if(c!==this.head){c.list&&c.list.removeNode(c);var a=this.head;c.list=this,c.next=a,a&&(a.prev=c),this.head=c,this.tail||(this.tail=c),this.length++}},d.prototype.pushNode=function(c){if(c!==this.tail){c.list&&c.list.removeNode(c);var a=this.tail;c.list=this,c.prev=a,a&&(a.next=c),this.tail=c,this.head||(this.head=c),this.length++}},d.prototype.push=function(){for(var c=0,a=arguments.length;c<a;c++)g(this,arguments[c]);return this.length},d.prototype.unshift=function(){for(var c=0,a=arguments.length;c<a;c++)I(this,arguments[c]);return this.length},d.prototype.pop=function(){if(this.tail){var c=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,c}},d.prototype.shift=function(){if(this.head){var c=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,c}},d.prototype.forEach=function(c,a){a=a||this;for(var i=this.head,y=0;null!==i;y++)c.call(a,i.value,y,this),i=i.next},d.prototype.forEachReverse=function(c,a){a=a||this;for(var i=this.tail,y=this.length-1;null!==i;y--)c.call(a,i.value,y,this),i=i.prev},d.prototype.get=function(c){for(var a=0,i=this.head;null!==i&&a<c;a++)i=i.next;if(a===c&&null!==i)return i.value},d.prototype.getReverse=function(c){for(var a=0,i=this.tail;null!==i&&a<c;a++)i=i.prev;if(a===c&&null!==i)return i.value},d.prototype.map=function(c,a){a=a||this;for(var i=new d,y=this.head;null!==y;)i.push(c.call(a,y.value,this)),y=y.next;return i},d.prototype.mapReverse=function(c,a){a=a||this;for(var i=new d,y=this.tail;null!==y;)i.push(c.call(a,y.value,this)),y=y.prev;return i},d.prototype.reduce=function(c,a){var i,y=this.head;if(arguments.length>1)i=a;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");y=this.head.next,i=this.head.value}for(var E=0;null!==y;E++)i=c(i,y.value,E),y=y.next;return i},d.prototype.reduceReverse=function(c,a){var i,y=this.tail;if(arguments.length>1)i=a;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");y=this.tail.prev,i=this.tail.value}for(var E=this.length-1;null!==y;E--)i=c(i,y.value,E),y=y.prev;return i},d.prototype.toArray=function(){for(var c=new Array(this.length),a=0,i=this.head;null!==i;a++)c[a]=i.value,i=i.next;return c},d.prototype.toArrayReverse=function(){for(var c=new Array(this.length),a=0,i=this.tail;null!==i;a++)c[a]=i.value,i=i.prev;return c},d.prototype.slice=function(c,a){(a=a||this.length)<0&&(a+=this.length),(c=c||0)<0&&(c+=this.length);var i=new d;if(a<c||a<0)return i;c<0&&(c=0),a>this.length&&(a=this.length);for(var y=0,E=this.head;null!==E&&y<c;y++)E=E.next;for(;null!==E&&y<a;y++,E=E.next)i.push(E.value);return i},d.prototype.sliceReverse=function(c,a){(a=a||this.length)<0&&(a+=this.length),(c=c||0)<0&&(c+=this.length);var i=new d;if(a<c||a<0)return i;c<0&&(c=0),a>this.length&&(a=this.length);for(var y=this.length,E=this.tail;null!==E&&y>a;y--)E=E.prev;for(;null!==E&&y>c;y--,E=E.prev)i.push(E.value);return i},d.prototype.splice=function(c,a,...i){c>this.length&&(c=this.length-1),c<0&&(c=this.length+c);for(var y=0,E=this.head;null!==E&&y<c;y++)E=E.next;var A=[];for(y=0;E&&y<a;y++)A.push(E.value),E=this.removeNode(E);for(null===E&&(E=this.tail),E!==this.head&&E!==this.tail&&(E=E.prev),y=0;y<i.length;y++)E=l(this,E,i[y]);return A},d.prototype.reverse=function(){for(var c=this.head,a=this.tail,i=c;null!==i;i=i.prev){var y=i.prev;i.prev=i.next,i.next=y}return this.head=a,this.tail=c,this};try{u(81644)(d)}catch{}},83179:(b,D,u)=>{u.r(D),u.d(D,{ActionReducer:()=>Pt,BlMicrofrontCoreModule:()=>Dn,COMPONENTS:()=>wn,DynamicLoaderService:()=>Fe,EFFECTS:()=>rn,EMIT_ACTION:()=>Ve,EMIT_STATE:()=>Ze,EmitAction:()=>We,EmitState:()=>Ee,GUARDS:()=>Qr,GlobalReducer:()=>Dt,GlobalStoreService:()=>Ae,HIDE:()=>cr,INIT_MODULE_BY_REMOTE_NAME:()=>Xt,InitMicrofrontendService:()=>Be,LOAD_STATE_TYPE:()=>pe,LOG_CONFIG:()=>Ot,LoaderComponent:()=>zr,LoaderResolver:()=>jn,LoaderShellComponent:()=>Yr,LoaderShellResolver:()=>Pn,LogService:()=>Hr,LookupService:()=>ln,MODULE_TYPE:()=>jr,MicrofrontendEffects:()=>Gr,MicrofrontendRepository:()=>ge,ModuleEffects:()=>Fr,ModuleGuard:()=>Wr,ModuleRepository:()=>gr,ModuleService:()=>cn,NAVIGATE_TO:()=>rr,PROVIDERS:()=>en,REPOSITORIES:()=>qr,RESET_ACTION:()=>Ke,RESET_CONF:()=>Yt,RESET_CONF_COMPLETE:()=>zt,RESET_MODULES:()=>Qt,RESET_ROUTES:()=>or,RETRIEVE_MICROFRONTENDS:()=>jt,RETRIEVE_MICROFRONTENDS_FAIL:()=>Ft,RETRIEVE_MICROFRONTENDS_SUCCESS:()=>Gt,RedirectComponent:()=>Me,RedirectionGuard:()=>Ne,RemoteLoaderService:()=>Ge,ResetAction:()=>wt,RouteModuleRepository:()=>Ie,RouterComponent:()=>Ue,RoutingTreeEffects:()=>_r,RoutingTreeReducer:()=>Tn,SET_CHECK_VERSION:()=>kt,SET_CURRENT_KEY_SELECTED:()=>ir,SET_CURRENT_LANG:()=>dr,SET_CURRENT_ROUTE:()=>tr,SET_ERROR_LOADED_SPECIFIC:()=>Ut,SET_MODULES:()=>Jt,SET_MODULE_INIT:()=>Zt,SET_REMOTE_LOADED:()=>Ht,SET_ROUTES:()=>qt,SET_SECURITY:()=>Vt,SET_SHELL_NAME:()=>Wt,SET_STATE_ID_COMMUNICATION:()=>Bt,SET_STATE_LOADED_SPECIFIC:()=>_t,SET_SUB_ROUTES_BY_KEY:()=>er,SET_SUB_ROUTES_BY_KEY_COMPLETE:()=>nr,SET_TRANSLATIONS:()=>fr,SET_TYPE_OF_PROTECTION:()=>Kt,SHOW:()=>ar,SHOW_SUCCESS:()=>lr,SHOW_TOASTER:()=>ur,STATES:()=>tn,Scroller:()=>Xr,SecureService:()=>kr,SharedConfig:()=>Cn,SharedLogConfig:()=>Pr,SpinnerEffects:()=>Ur,SpinnerReducer:()=>yn,SpinnerRepository:()=>lt,TYPE_OF_PROTECTION:()=>ce,ToasterEffects:()=>Br,ToasterType:()=>ve,ToastrReducer:()=>Rn,ToastrRepository:()=>Mr,TranslateEffects:()=>Vr,TranslateReducer:()=>Nn,TranslateRepository:()=>Cr,WrapperComponent:()=>ct,getCheckVersion:()=>yr,getError:()=>pn,getLoadState:()=>De,getLoading:()=>hn,getMicrofrontendState:()=>re,getMicrofrontends:()=>At,getModulesByKey:()=>_e,getModulesState:()=>Zr,getModulesStateModel:()=>Ct,getPackageJsonPath:()=>Pe,getShellName:()=>Se,getSpecificLoadState:()=>Er,getSpecificMicrofrontend:()=>fe,getSpecificStaticRoute:()=>ot,getStaticRoutes:()=>fn,hide:()=>ye,initModuleByRemoteName:()=>Ye,initStore:()=>Jr,isPromise:()=>Sr,lookupProviders:()=>Nt,microfrontendReducer:()=>mr,modulesProviders:()=>we,navigateTo:()=>qe,observableToInstantValue:()=>ae,processPath:()=>st,randomId:()=>it,reducer:()=>Kr,resetConf:()=>pt,resetConfComplete:()=>mt,resetModules:()=>Je,resetRoutes:()=>rt,retrieveMicrofrontends:()=>xe,retrieveMicrofrontendsFail:()=>He,retrieveMicrofrontendsSuccess:()=>Et,setCheckVersion:()=>gt,setCurrentKeySelected:()=>sr,setCurrentLang:()=>nt,setCurrentRoute:()=>tt,setErrorLoaded:()=>de,setMicrofrontends:()=>hr,setModuleInit:()=>St,setModules:()=>Te,setRemoteLoaded:()=>$e,setRoutes:()=>Qe,setSecurity:()=>ke,setShellName:()=>ze,setStateIdCommunication:()=>yt,setStateLoaded:()=>ue,setStaticRoutes:()=>pr,setSubRoutesByKey:()=>Rt,setSubRoutesByKeyComplete:()=>et,setTranslationByWrapperKey:()=>It,setTypeOfProtection:()=>Xe,show:()=>be,showSuccess:()=>vt,showToaster:()=>Le});var d=u(44423),l=u(98173),g=u(89407),I=u(37699),R=u(52631),c=u(74798),a=u(31385),i=u(18291),y=u(87776),E=u(14084),A=u(42930),T=u(39927),v=u(10032),$=u(44252),_=u(79636),Z=u(66767),h=u(60103),V=u(14915);let Y={};const W={},N={};let j=!1;function H(){return(H=(0,d.Z)(function*(r,S){return(yield W[r].get(S))()})).apply(this,arguments)}function U(r,S){return ie.apply(this,arguments)}function ie(){return(ie=(0,d.Z)(function*(r,S){return N[S]||(j||(yield u.I("default"),j=!0),yield r.init(u.S.default),N[S]=!0),r})).apply(this,arguments)}function he(r,S){return se.apply(this,arguments)}function se(){return se=(0,d.Z)(function*(r,S){if("string"==typeof r)return yield C(r,S);if("script"===r.type){const e=r;return yield C(e.remoteEntry,e.remoteName)}"module"===r.type&&(yield function Ce(r){return w.apply(this,arguments)}(r.remoteEntry))}),se.apply(this,arguments)}function w(){return(w=(0,d.Z)(function*(r){return W[r]?Promise.resolve():yield import(r).then(S=>{U(S,r),W[r]=S})})).apply(this,arguments)}function C(r,S){return K.apply(this,arguments)}function K(){return(K=(0,d.Z)(function*(r,S){return new Promise((e,t)=>{if(W[S])return void e();const o=document.createElement("script");o.src=r,o.onerror=t,o.onload=()=>{const n=window[S];U(n,S),W[S]=n,e()},document.body.appendChild(o)})})).apply(this,arguments)}function G(r,S){return B.apply(this,arguments)}function B(){return B=(0,d.Z)(function*(r,S){let e,t,o,n;if(n="string"==typeof r?{type:"manifest",remoteName:r,exposedModule:S}:r,!n.type){const s=Object.keys(Y).length>0;n.type=s?"manifest":"script"}if("manifest"===n.type){const s=Y[n.remoteName];if(!s)throw new Error("Manifest does not contain "+n.remoteName);n={type:s.type,exposedModule:n.exposedModule,remoteEntry:s.remoteEntry,remoteName:"script"===s.type?n.remoteName:void 0},o=s.remoteEntry}else o=n.remoteEntry;return"script"===n.type?(e={type:"script",remoteEntry:n.remoteEntry,remoteName:n.remoteName},t=n.remoteName):"module"===n.type&&(e={type:"module",remoteEntry:n.remoteEntry},t=n.remoteEntry),o&&(yield he(e)),yield function P(r,S){return H.apply(this,arguments)}(t,n.exposedModule)}),B.apply(this,arguments)}var le=u(52129),xt=u(79350),$t=u(20001),nn=u(45830),ht=u(8438),on=u(24975);const Ve="EMIT_ACTION",Ke="RESET_ACTION",Ze="EMIT_STATE",We=r=>({type:Ve,payload:r}),wt=()=>({type:Ke,payload:null}),Ee=r=>({type:Ze,payload:r||null}),Dt=(r=an,S)=>{if(S.type===Ze){let e=S.payload;return e?{...r,[e.stateName]:e.payload}:{...r}}return r},Pt=(r=sn,S)=>{if(S.type===Ve){let e=S.payload;return{...r,action:e}}return S.type===Ke?{...r,action:void 0}:r};var sn={action:void 0},an={};let Ae=(()=>{class r{constructor(){this.gs=v.GlobalStore.Get(!1)}getStateFromGlobalStore(e){if(this.gs.GetPartnerState("GlobalStore")&&0!=Object.keys(this.gs.GetPartnerState("GlobalStore")).length)return this.previousGlobalStore=this.gs.GetPartnerState("GlobalStore"),this.gs.GetPartnerState("GlobalStore")[e]}subscribeToStateFromGlobalStore(e){let t;if(this.gs.GetPartnerState("GlobalStore")&&0!=Object.keys(this.gs.GetPartnerState("GlobalStore")).length){let o=this.getStateFromGlobalStore(e);t=new g.y(n=>{n.next(o),this.gs.Subscribe("GlobalStore",s=>{s[e]&&(null==this.previousGlobalStore[e]||!$.isEqual(this.previousGlobalStore[e],s[e]))&&(this.previousGlobalStore[e]=s[e],n.next(s[e]))})})}else t=new g.y;return t}emitAction(e,t){this.gs.DispatchAction("ActionStore",We({actionType:e,payload:{...t}}))}emitState(e,t){this.gs.DispatchAction("GlobalStore",Ee({stateName:e,payload:t}))}static#e=this.\u0275fac=function(t){return new(t||r)};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Me=(()=>{class r{static#e=this.\u0275fac=function(t){return new(t||r)};static#t=this.\u0275cmp=l.\u0275\u0275defineComponent({type:r,selectors:[["bl-microfront-redirect"]],decls:0,vars:0,template:function(t,o){},encapsulation:2})}return r})();class ln{constructor(S){this.http=S}}class cn{constructor(S){this.http=S}}const jt="RETRIEVE_MICROFRONTENDS",Gt="RETRIEVE_MICROFRONTENDS_SUCCESS",Ft="RETRIEVE_MICROFRONTENDS_FAIL",_t="SET_STATE_LOADED_SPECIFIC",Ut="SET_ERROR_LOADED_SPECIFIC",Bt="SET_STATE_ID_COMMUNICATION",Vt="SET_SECURITY",Kt="SET_TYPE_OF_PROTECTION",Zt="SET_MODULE_INIT",Wt="SET_SHELL_NAME",Ht="SET_REMOTE_LOADED",kt="SET_CHECK_VERSION",Xt="INIT_MODULE_BY_REMOTE_NAME",Yt="RESET_CONF",zt="RESET_CONF_COMPLETE",xe=(0,h.createAction)(jt,(0,h.props)()),pt=(0,h.createAction)(Yt,(0,h.props)()),mt=(0,h.createAction)(zt),Et=(0,h.createAction)(Gt,(0,h.props)()),He=(0,h.createAction)(Ft,(0,h.props)()),ue=(0,h.createAction)(_t,(0,h.props)()),de=(0,h.createAction)(Ut,(0,h.props)()),yt=(0,h.createAction)(Bt,(0,h.props)()),ke=(0,h.createAction)(Vt,(0,h.props)()),Xe=(0,h.createAction)(Kt,(0,h.props)()),Ye=(0,h.createAction)(Xt,(0,h.props)()),St=(0,h.createAction)(Zt,(0,h.props)()),$e=(0,h.createAction)(Ht,(0,h.props)()),ze=(0,h.createAction)(Wt,(0,h.props)()),gt=(0,h.createAction)(kt,(0,h.props)()),Jt="SET_MODULES",Qt="RESET_MODULES",Te=(0,h.createAction)(Jt,(0,h.props)()),Je=(0,h.createAction)(Qt),qt="SET_ROUTES",er="SET_SUB_ROUTES_BY_KEY",tr="SET_CURRENT_ROUTE",rr="NAVIGATE_TO",nr="SET_SUB_ROUTES_BY_KEY_COMPLETE",or="RESET_ROUTES",ir="SET_CURRENT_KEY_SELECTED",Qe=(0,h.createAction)(qt,(0,h.props)()),qe=(0,h.createAction)(rr,(0,h.props)()),Rt=(0,h.createAction)(er,(0,h.props)()),et=(0,h.createAction)(nr,(0,h.props)()),tt=(0,h.createAction)(tr,(0,h.props)()),rt=(0,h.createAction)(or),sr=(0,h.createAction)(ir,(0,h.props)()),ar="SHOW",lr="SHOW_SUCCESS",cr="HIDE",be=(0,h.createAction)(ar,(0,h.props)()),vt=(0,h.createAction)(lr,(0,h.props)()),ye=(0,h.createAction)(cr,(0,h.props)()),ur="SHOW_TOASTER",Le=(0,h.createAction)(ur,(0,h.props)()),dr="SET_CURRENT_LANG",fr="SET_TRANSLATIONS",nt=(0,h.createAction)(dr,(0,h.props)()),It=(0,h.createAction)(fr,(0,h.props)()),Nt=[],we=[];var ce=function(r){return r[r.GLOBAL=0]="GLOBAL",r[r.MODULE=1]="MODULE",r}(ce||{});const dn=(0,h.createReducer)({microfrontends:void 0,shellName:"shell",staticRoutes:void 0,loading:!1,checkVersion:!1,error:void 0,loadState:{loaded:!1,microfrontendsAdded:!1,error:void 0},securityEnabled:!1,typeOfProtection:ce.GLOBAL},(0,h.on)(mt,r=>({...r,microfrontends:void 0,staticRoutes:void 0,error:void 0,loadState:{loaded:!1,microfrontendsAdded:!1,error:void 0}})),(0,h.on)(xe,r=>({...r,loading:!0,error:void 0})),(0,h.on)(ze,(r,{name:S})=>({...r,shellName:S})),(0,h.on)(gt,(r,{value:S})=>({...r,checkVersion:S})),(0,h.on)(He,(r,{error:S})=>({...r,loading:!1,error:S})),(0,h.on)(ue,(r,{remoteName:S,loaded:e})=>{let t=r.microfrontends.map(n=>n.remoteName==S?{...n,loadState:{...n.loadState,loaded:e}}:n);return null==r.microfrontends.find(n=>n.remoteName==S)?{...r,microfrontends:t,loadState:{...r.loadState,loaded:e}}:{...r,microfrontends:t}}),(0,h.on)(yt,(r,{remoteName:S,stateId:e,stateIdRes:t})=>{let o=r.microfrontends.map(n=>n.remoteName==S?{...n,stateId:e,stateIdRes:t}:n);return{...r,microfrontends:o}}),(0,h.on)(St,(r,{remoteName:S})=>{let e=r.microfrontends.map(t=>t.remoteName==S?{...t,moduleInit:!0}:t);return{...r,microfrontends:e}}),(0,h.on)($e,(r,{remoteName:S,value:e})=>{let t=r.microfrontends.map(o=>o.remoteName==S?{...o,remoteLoaded:e}:o);return{...r,microfrontends:t}}),(0,h.on)(ke,(r,{securityEnabled:S})=>({...r,securityEnabled:S})),(0,h.on)(Xe,(r,{typeOfProtection:S})=>({...r,typeOfProtection:S})),(0,h.on)(de,(r,{remoteName:S,error:e})=>{let t=r.microfrontends.map(n=>n.remoteName==S?{...n,loadState:{...n.loadState,error:e}}:n);return null==r.microfrontends.find(n=>n.remoteName==S)?{...r,microfrontends:t,loadState:{...r.loadState,error:e}}:{...r,microfrontends:t}}),(0,h.on)(Et,(r,{microfrontends:S,staticRoutes:e,appKey:t})=>{let o=S,n=e;return null==r.microfrontends&&null==r.staticRoutes?{...r,microfrontends:o,previousMicrofrontends:void 0,staticRoutes:n,loading:!1,error:void 0,loadState:{...r.loadState,error:void 0,microfrontendsAdded:!0}}:(null!=r&&null!=r.microfrontends&&(o=hr(r,S,t)),null!=r&&null!=r.staticRoutes&&(n=pr(r,e)),null!=r&&null!=r.microfrontends&&null==r.microfrontends.find(f=>f.remoteName==t)?{...r,microfrontends:o,staticRoutes:n,loading:!1,error:void 0,loadState:{...r.loadState,error:void 0,microfrontendsAdded:!0}}:{...r,error:void 0,microfrontends:o,staticRoutes:n,loading:!1})}));function hr(r,S,e){return[...S.filter(s=>null==r.microfrontends.find(f=>f.remoteName==s.remoteName)),...S.filter(s=>null!=r.microfrontends.find(f=>f.remoteName==s.remoteName)).map(s=>{let f=r.microfrontends.find(p=>p.remoteName==s.remoteName);return{...f,loadState:{...f.loadState,error:void 0,microfrontendsAdded:!0}}}),...r.microfrontends.filter(s=>null==S.find(f=>f.remoteName==s.remoteName)).map(s=>s.remoteName==e?{...s,loadState:{...s.loadState,error:void 0,microfrontendsAdded:!0}}:s)]}function pr(r,S){return[...S.filter(n=>null==r.staticRoutes.find(s=>s.key==n.key)),...S.filter(n=>null!=r.staticRoutes.find(s=>s.key==n.key)),...r.staticRoutes.filter(n=>null==S.find(s=>s.key==n.key))]}function mr(r,S){return dn(r,S)}const re=(0,h.createFeatureSelector)("_microfrontendState"),At=(0,h.createSelector)(re,r=>r.microfrontends),fn=(0,h.createSelector)(re,r=>r.staticRoutes),ot=(0,h.createSelector)(re,(r,S)=>null!=r.staticRoutes?r.staticRoutes.find(e=>e.key==S):void 0),fe=(0,h.createSelector)(re,(r,S)=>null!=r.microfrontends?r.microfrontends.find(e=>e.remoteName==S):void 0),hn=(0,h.createSelector)(re,r=>r.loading),pn=(0,h.createSelector)(re,r=>r.error),De=(0,h.createSelector)(re,r=>r.loadState),Er=(0,h.createSelector)(re,(r,S)=>null!=r.microfrontends&&null!=r.microfrontends.find(e=>e.remoteName==S)?r.microfrontends.find(e=>e.remoteName==S).loadState:void 0),Se=(0,h.createSelector)(re,r=>r.shellName),yr=(0,h.createSelector)(re,r=>r.checkVersion);function Sr(r){return!!r&&("object"==typeof r||"function"==typeof r)&&"function"==typeof r.then}function ae(r){let S;return r.pipe((0,i.q)(1)).subscribe(e=>S=e),S}let ge=(()=>{class r{constructor(e){this.store=e}getMicrofrontends(){return ae(this.getMicrofrontends$())}getMicrofrontends$(){return this.store.select(At)}getSecurityState(){let e;return this.getSecurityState$().pipe((0,i.q)(1)).subscribe(t=>e=t),e}getSecurityState$(){return this.store.select(re).pipe((0,y.U)(e=>e.securityEnabled))}getTypeOfProtection(){let e;return this.getTypeOfProtection$().pipe((0,i.q)(1)).subscribe(t=>e=t),e}getTypeOfProtection$(){return this.store.select(re).pipe((0,y.U)(e=>e.typeOfProtection))}getMicrofrontendByKey(e){let t;return this.getMicrofrontendByKey$(e).pipe((0,i.q)(1)).subscribe(o=>t=o),t}getMicrofrontendByKey$(e){return this.store.select(fe,e)}getStaticRouteAsModule(e){let t;return this.getStaticRouteAsModule$(e).pipe((0,i.q)(1)).subscribe(o=>t=o),t}getStaticRouteAsModule$(e){return this.store.select(ot,e)}getShellName(){let e;return this.store.select(Se).pipe((0,i.q)(1)).subscribe(t=>e=t),e}getCheckVersion(){return ae(this.store.select(yr))}retrieveMicrofrontends(e){this.store.dispatch(xe({appKey:e}))}resetConf(e){this.store.dispatch(pt({routerConfig:e}))}setStateLoaded(e,t){this.store.dispatch(ue({remoteName:e,loaded:t}))}setErrorLoaded(e,t){this.store.dispatch(de({remoteName:e,error:t}))}setStateIdCommunication(e,t,o){this.store.dispatch(yt({remoteName:e,stateId:t,stateIdRes:o}))}setSecurity(e){this.store.dispatch(ke({securityEnabled:e}))}setTypeOfProtection(e){this.store.dispatch(Xe({typeOfProtection:e}))}initModuleByRemoteName(e){this.store.dispatch(Ye({remoteName:e}))}setModuleInit(e){this.store.dispatch(St({remoteName:e}))}setRemoteLoaded(e,t){this.store.dispatch($e({remoteName:e,value:t}))}setShellName(e){this.store.dispatch(ze({name:e}))}setCheckVersion(e){this.store.dispatch(gt({value:e}))}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(h.Store))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();function it(){return"_"+Math.random().toString(36).substr(2,9)}const Pe=r=>`${r.split("/")[0]}//${r.split("/")[2]}/assets/package.json`,st=r=>{let e,S={},t=r;return r.includes("?")?(r.split("?")[1].split("#")[0].split("&").forEach(n=>{S[n.split("=")[0]]=n.split("=")[1]}),t=r.split("?")[0],r.includes("#")&&(e=r.split("?")[1].split("#")[1])):r.includes("#")&&(t=r.split("#")[0],e=r.split("#")[1]),{path:t,params:{...e?{fragment:e}:{},queryParams:S}}};let gr=(()=>{class r{constructor(e){this.store=e}setModules(e,t){this.store.dispatch(Te({modules:e,appKey:t}))}resetModules(){this.store.dispatch(Je())}getModulesByKey$(e){return this.store.select(_e,e).pipe((0,y.U)(t=>t.modules))}getModulesByKey(e){return ae(this.getModulesByKey$(e))}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(h.Store))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();const mn={isRunning:!1,_selector:"loader-wrapper",_element:document.getElementById("loader-wrapper"),_currentNumberOfLoaders:0,hidding:!0},En=(0,h.createReducer)(mn,(0,h.on)(be,(r,{hidding:S})=>{let e=!0;return e=null==S||null==S?r.hidding:0==r.hidding?S:r.hidding,{...r,isRunning:!0,hidding:e,_currentNumberOfLoaders:r._currentNumberOfLoaders+1,_element:r._element}}),(0,h.on)(ye,r=>({...r,_currentNumberOfLoaders:r._currentNumberOfLoaders>0?r._currentNumberOfLoaders-1:r._currentNumberOfLoaders,isRunning:!(r._currentNumberOfLoaders-1==0||0==r._currentNumberOfLoaders),hidding:r._currentNumberOfLoaders-1!=0&&0!=r._currentNumberOfLoaders&&r.hidding})),(0,h.on)(vt,(r,{element:S})=>({...r,_element:S})));function Rr(r,S){return En(r,S)}const Mt=(0,h.createFeatureSelector)("_spinnerState"),at=(0,h.createSelector)(Mt,r=>r),vr=(0,h.createSelector)(Mt,r=>r.isRunning);var yn=Object.freeze({__proto__:null,getSpinnerState:Mt,isRunning:vr,reducer:Rr,spinnerState:at});let lt=(()=>{class r{constructor(e){this.store=e}isRunning$(){return this.store.select(vr)}isRunning(){return ae(this.isRunning$())}spinnerState$(){return this.store.select(at)}spinnerState(){return ae(this.spinnerState$())}show(e){this.store.dispatch(be({hidding:e}))}hide(e){this.store.dispatch(ye({delay:e}))}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(h.Store))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();const gn=(0,h.createReducer)({lastToaster:void 0},(0,h.on)(Le,(r,{toasterType:S,message:e})=>({lastToaster:{toasterType:S,message:e}})));function Ir(r,S){return gn(r,S)}const Tt=(0,h.createFeatureSelector)("_toasterState"),Nr=(0,h.createSelector)(Tt,r=>r),Ar=(0,h.createSelector)(Tt,r=>r.lastToaster);var Rn=Object.freeze({__proto__:null,getLastToaster:Ar,getToasterState:Tt,reducer:Ir,toasterState:Nr});let Mr=(()=>{class r{constructor(e){this.store=e}showToaster(e,t){this.store.dispatch(Le({toasterType:e,message:t}))}getLastToaster$(){return this.store.select(Ar)}getLastToaster(){return ae(this.getLastToaster$())}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(h.Store))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();const In=(0,h.createReducer)({translations:[],currentLang:""},(0,h.on)(nt,(r,{lang:S})=>({...r,currentLang:S})),(0,h.on)(It,(r,{wrapperKey:S,translations:e})=>{let t=r.translations.find(o=>o.wrapperKey==S);return null!=t?{...r,translations:[...r.translations.map(o=>o.wrapperKey==S?{wrapperKey:S,translations:[...t.translations,...e]}:o)]}:{...r,translations:[...r.translations,{wrapperKey:S,translations:e}]}}));function Tr(r,S){return In(r,S)}const bt=(0,h.createFeatureSelector)("_translateState"),br=(0,h.createSelector)(bt,r=>r),Lr=(0,h.createSelector)(bt,r=>r.currentLang),Or=(0,h.createSelector)(bt,(r,S)=>{let e=r.translations.find(t=>t.wrapperKey==S);return e&&null!=e.translations?e.translations:[]});var Nn=Object.freeze({__proto__:null,getCurrentLang:Lr,getTranslationsByWrapperKey:Or,reducer:Tr,transalteState:br});let Cr=(()=>{class r{constructor(e){this.store=e}setCurrentLang(e){this.store.dispatch(nt({lang:e}))}setTranslationByWrapperKey(e,t){this.store.dispatch(It({wrapperKey:e,translations:t}))}getCurrentLang$(){return this.store.select(Lr)}getCurrentLang(){let e;return this.getCurrentLang$().pipe((0,i.q)(1)).subscribe(t=>e=t),e}getTranslationsByWrapperKey$(e){return(0,I.a)([this.getCurrentLang$(),this.store.select(Or,e)]).pipe((0,y.U)(([t,o])=>o.filter(n=>n.lang===t)))}getTranslationsByWrapperKey(e){let t;return this.getTranslationsByWrapperKey$(e).pipe((0,i.q)(1)).subscribe(o=>t=o),t}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(h.Store))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();var pe=function(r){return r[r.SUCCESS=0]="SUCCESS",r[r.ERROR=1]="ERROR",r[r.NOT_AVAILABLE=2]="NOT_AVAILABLE",r}(pe||{});const Mn=(0,h.createReducer)({_routes:[],_currentActivatedRoute:void 0,lastNavigation:void 0,currentKeySelected:void 0},(0,h.on)(Qe,(r,{routes:S})=>{if(null!=r&&null!=r._routes){let e=S.filter(n=>null==r._routes.find(s=>s.key==n.key)),t=S.filter(n=>null!=r._routes.find(s=>s.key==n.key)).map(n=>{let s=r._routes.find(f=>f.key==n.key);return{...n,subRoutes:s.subRoutes}}),o=r._routes.filter(n=>null==S.find(s=>s.key==n.key));return{...r,_routes:[...o,...e,...t]}}return{...r,_routes:S}}),(0,h.on)(tt,(r,{key:S})=>({...r,_currentActivatedRoute:S})),(0,h.on)(sr,(r,{key:S})=>({...r,currentKeySelected:S})),(0,h.on)(rt,r=>({_routes:[],_currentActivatedRoute:r._currentActivatedRoute,lastNavigation:r.lastNavigation,currentKeySelected:r.currentKeySelected})),(0,h.on)(et,(r,{key:S,routes:e})=>S?{...r,_routes:r._routes.map(t=>t.key==S?{...t,subRoutes:e}:t)}:{...r}),(0,h.on)(qe,(r,{path:S})=>({...r,lastNavigation:S,_currentActivatedRoute:S.split("/")[1]})));function xr(r,S){return Mn(r,S)}const Re=(0,h.createFeatureSelector)("_routingTreeState"),Lt=(0,h.createSelector)(Re,r=>r),je=(0,h.createSelector)(Re,r=>r._routes),$r=(0,h.createSelector)(Re,r=>r.lastNavigation),Oe=(0,h.createSelector)(Re,(r,S)=>r._routes.find(e=>e.key===S)),wr=(0,h.createSelector)(Re,r=>r._currentActivatedRoute),Dr=(0,h.createSelector)(Re,r=>r.currentKeySelected);var Tn=Object.freeze({__proto__:null,getCurrentKeySelected:Dr,getCurrentRoute:wr,getLastNavigation:$r,getRouteByKey:Oe,getRoutes:je,getRoutingTreeState:Re,reducer:xr,routingTreeState:Lt});const bn=["vc"],Ln=["errorContainer"],On=["infoContainer"];let ct=(()=>{class r{constructor(e,t,o,n){this.loaderComponentService=e,this.route=t,this.microfrontendRepository=o,this.spinnerRepository=n,this.stateId=new l.EventEmitter,this.stateIdRes=new l.EventEmitter,this.loadState=new l.EventEmitter,this.loadStateEmit=!1}ngAfterViewInit(){var e=this;return(0,d.Z)(function*(){if(null==e.initModel){const{type:t,elementName:o,importName:n,exposedModule:s,errorModule:f,wrapperKey:p,stateId:m,stateIdRes:M}=e.route.snapshot.data;e.initModel={type:t,elementName:o,importName:n,exposedModule:s,errorModule:f,wrapper:p},e.stateIdValue=m,e.stateIdResValue=M,e.microfrontendRepository.setStateIdCommunication(e.initModel.importName,e.stateIdValue,e.stateIdResValue),e.spinnerRepository.show(!1)}else e.initMutualizedStores();yield e.setComponent()})()}initMutualizedStores(){this.stateIdValue=it(),this.stateIdResValue=this.stateIdValue+"_res"}emitLoadState(e){this.loadStateEmit||(this.loadStateEmit=!0,this.loadState.emit(e))}setComponent(){var e=this;return(0,d.Z)(function*(){const{importName:t,moduleGuards:o=[],globalGuards:n=[],exposedModule:s,wrapper:f}=e.initModel;(yield e.loaderComponentService.getAuthorization(t,s,o,n,f))?e.loaderComponentService.loadRemoteComponentMicrofrontend({...e.initModel},e.errorContainer).then(m=>{e.emitLoadState(m);const M=document.createElement(e.initModel.elementName);e.stateId&&e.stateIdRes&&(M.setAttribute("stateId",e.stateIdValue),M.setAttribute("stateIdRes",e.stateIdResValue),e.stateId.emit(e.stateIdValue),e.stateIdRes.emit(e.stateIdResValue)),null!=e.route.snapshot.data.exposedModule&&e.spinnerRepository.hide(0),e.vc.nativeElement.appendChild(M),console.debug(`element ${e.initModel.elementName} loaded!`)}).catch(m=>{e.loaderComponentService.loadAndRenderComponents(e.initModel.errorModule,e.errorContainer),console.error(`error loading ${e.initModel.elementName}:`,m),e.emitLoadState(pe.ERROR)}):(e.loaderComponentService.loadAndRenderComponents(e.initModel.notAvailableModule,e.infoContainer),e.emitLoadState(pe.NOT_AVAILABLE))})()}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275directiveInject(Fe),l.\u0275\u0275directiveInject(_.ActivatedRoute),l.\u0275\u0275directiveInject(ge),l.\u0275\u0275directiveInject(lt))};static#t=this.\u0275cmp=l.\u0275\u0275defineComponent({type:r,selectors:[["bl-microfront-wrapper"]],viewQuery:function(t,o){if(1&t&&(l.\u0275\u0275viewQuery(bn,7,l.ElementRef),l.\u0275\u0275viewQuery(Ln,5,l.ViewContainerRef),l.\u0275\u0275viewQuery(On,5,l.ViewContainerRef)),2&t){let n;l.\u0275\u0275queryRefresh(n=l.\u0275\u0275loadQuery())&&(o.vc=n.first),l.\u0275\u0275queryRefresh(n=l.\u0275\u0275loadQuery())&&(o.errorContainer=n.first),l.\u0275\u0275queryRefresh(n=l.\u0275\u0275loadQuery())&&(o.infoContainer=n.first)}},inputs:{initModel:"initModel"},outputs:{stateId:"stateId",stateIdRes:"stateIdRes",loadState:"loadState"},decls:6,vars:0,consts:[["vc",""],["errorContainer",""],["infoContainer",""]],template:function(t,o){1&t&&(l.\u0275\u0275element(0,"span",null,0),l.\u0275\u0275elementContainer(2,null,1)(4,null,2))},encapsulation:2})}return r})();class Pr{constructor(){this.info=!0,this.debug=!1,this.error=!0}}class Cn{constructor(){this.log=new Pr}}const Ot=new l.InjectionToken("log-config");var jr=function(r){return r[r.FEATURE=0]="FEATURE",r[r.ERROR=1]="ERROR",r[r.NOT_AVAILABLE=2]="NOT_AVAILABLE",r}(jr||{});let Ge=(()=>{class r{static#e=this.remoteEntrysLoading={};constructor(e,t,o){this.store=e,this.microfrontendRepository=o,this.containerMap={},this.remoteMap={},this.isDefaultScopeInitialized=!1,this.httpClient=new Z.eN(t)}loadRemoteEntryOnce(e,t){var o=this;return new Promise(function(){var n=(0,d.Z)(function*(s,f){let p;if(o.store.select(fe,t).pipe((0,i.q)(1)).subscribe(m=>p=m&&m.remoteLoaded),null==p||0==p){null==r.remoteEntrysLoading[t]&&(r.remoteEntrysLoading[t]=he({type:"module",remoteEntry:e}));try{yield r.remoteEntrysLoading[t],o.store.dispatch($e({remoteName:t,value:!0})),delete r.remoteEntrysLoading[t],s(!0)}catch{o.store.dispatch($e({remoteName:t,value:!1})),delete r.remoteEntrysLoading[t],f(!1)}}else s(!0)});return function(s,f){return n.apply(this,arguments)}}())}checkRemoteEntrys(e,t){var o=this;return(0,d.Z)(function*(){return new Promise(function(){var n=(0,d.Z)(function*(s,f){let p=e.remoteEntrys,m=!1,M=0;for(;!m&&M<p.length;){try{yield o.urlAvailable(t?Pe(p[M]):p[M]),m=!0}catch{}M+=1}s(m)});return function(s,f){return n.apply(this,arguments)}}())})()}urlAvailable(e){var t=this;return(0,d.Z)(function*(){const o=new Z.WM;return o.append("Cache-Control","no-cache, no-store, must-revalidate, post-check=0, pre-check=0"),o.append("Pragma","no-cache"),o.append("Expires","0"),new Promise((n,s)=>{t.httpClient.get(e,{headers:o}).pipe((0,E.K)(f=>(0,R.of)(200==f.status))).subscribe(f=>{f?n(!0):s(`Url not available : ${e}`)})})})()}checkMicrofrontendAvailability(e){var t=this;return new Promise(function(){var o=(0,d.Z)(function*(n,s){let f=!1,p=t.microfrontendRepository.getCheckVersion();if(null!=e.remoteEntrys&&0!=e.remoteEntrys.length)f=yield t.checkRemoteEntrys(e,p);else try{f=yield t.urlAvailable(p?Pe(e.remoteEntry):e.remoteEntry)}catch(m){console.error(m)}n(f)});return function(n,s){return o.apply(this,arguments)}}())}getRemoteEntrys(e){let t=this.microfrontendRepository.getMicrofrontendByKey(e);return{remoteEntry:t?t.remoteEntry:void 0,remoteEntrys:t?t.remoteEntrys:void 0}}getAllRemoteEntryAvailable(e,t){var o=this;return(0,d.Z)(function*(){let n=[],s=0;for(o.store.dispatch(be({hidding:!1}));s<e.length;){try{(yield o.urlAvailable(t?Pe(e[s]):e[s]))&&n.push(e[s])}catch(f){console.error(f)}s+=1}return o.store.dispatch(ye({delay:0})),n})()}getRemoteEntryByVersion(e){var t=this;return(0,d.Z)(function*(){let n,o={min:{remoteEntry:void 0,version:void 0},max:{remoteEntry:void 0,version:void 0}};for(let s=0;s<e.length;s++){let f=yield t.httpClient.get(Pe(e[s])).toPromise();if(void 0!==f.dependencies["@angular/core"]){let p=le.valid(le.coerce(f.dependencies["@angular/core"]));n=window.NG_VERSION,o=t.getClosestVersion(o,e[s],p,n)}else if(void 0!==f.dependencies.react){let p=le.valid(le.coerce(f.dependencies.react));n=window.REACT_VERSION,o=t.getClosestVersion(o,e[s],p,n)}}return t.getRemoteEntryByRange(o,n)})()}getClosestVersion(e,t,o,n){let s=e??{min:{remoteEntry:void 0,version:void 0},max:{remoteEntry:void 0,version:void 0}},f=le.valid(le.coerce(n));return void 0===s.max.version&&void 0===s.min.version?s=le.gt(o,f)?{...s,max:{remoteEntry:t,version:o}}:{...s,min:{remoteEntry:t,version:o}}:le.gt(o,f)?(void 0===s.max.version||le.lt(o,s.max.version))&&(s={...s,max:{remoteEntry:t,version:o}}):(void 0===s.min.version||le.gt(o,s.min.version))&&(s={...s,min:{remoteEntry:t,version:o}}),s}getRemoteEntryByRange(e,t){let n,o=le.valid(le.coerce(t)).split(".").map(p=>parseInt(p)),s=0,f=0;if(void 0===e.min.version)n=e.max.remoteEntry;else if(void 0===e.max.version)n=e.min.remoteEntry;else{let p=e.min.version.split("."),m=e.max.version.split("."),M=0;for(;void 0===n;)if(void 0===p[M]||void 0===m[M])n=e.max.remoteEntry;else{let O=f+(2==M?(o[M]-m[M])/10:o[M]-m[M]),x=s+(2==M?(o[M]-p[M])/10:o[M]-p[M]);Math.abs(O)===Math.abs(x)?(f=O,s=x,M+=1):Math.abs(O)>Math.abs(x)?n=e.min.remoteEntry:Math.abs(O)<Math.abs(x)?n=e.max.remoteEntry:(f=O,s=x,M+=1)}}return n}loadRouteWithMultipleEntrys(e,t){var o=this;return(0,d.Z)(function*(){return new Promise(function(){var n=(0,d.Z)(function*(s,f){let p=e.remoteEntrys,m=!1,M=0,O=!1,L=[];for(o.microfrontendRepository.getCheckVersion()?(L=yield o.getAllRemoteEntryAvailable(p,!0),L.length<=1&&(O=!0,L=yield o.getAllRemoteEntryAvailable(p,!1))):(O=!0,L=yield o.getAllRemoteEntryAvailable(p,!1));!m&&M<L.length;){try{let z=O?L[0]:yield o.getRemoteEntryByVersion(L);(yield o.loadRemoteEntryOnce(z,e.remoteName))&&(m=!0,s(G({remoteEntry:z,exposedModule:e.exposedModule,type:"module"}).then(ne=>ne[e.exposedModule.split("/")[1]]).catch(ne=>(o.store.dispatch(de({remoteName:e.remoteName,error:"Error during the loading of "+e.remoteName+" Details: "+ne})),Promise.resolve(t)))))}catch{}M+=1}m||(o.store.dispatch(de({remoteName:e.remoteName,error:"Error during the loading of "+e.remoteName+" Aucune url ne permet de charger le module"})),t&&s(Promise.resolve(t)))});return function(s,f){return n.apply(this,arguments)}}())})()}loadRouteWithSingleEntry(e,t){var o=this;return(0,d.Z)(function*(){return new Promise((n,s)=>{o.loadRemoteEntryOnce(e.remoteEntry,e.remoteName).then(()=>{n(G({remoteEntry:e.remoteEntry,exposedModule:e.exposedModule,type:"module"}).then(p=>p[e.exposedModule.split("/")[1]]).catch(p=>{o.store.dispatch(de({remoteName:e.remoteName,error:"Error during the loading of "+e.remoteName+" Details: "+p})),n(Promise.resolve(t))}))}).catch(f=>{o.store.dispatch(de({remoteName:e.remoteName,error:"Error during the loading of "+e.remoteName+" Details: "+f})),n(Promise.resolve(t))})})})()}loadMultipleRemoteEntry(e){var t=this;return(0,d.Z)(function*(){let o=e.remoteEntrys,n=!1,s=0,f=!1,m=[];for(t.microfrontendRepository.getCheckVersion()?(m=yield t.getAllRemoteEntryAvailable(o,!0),m.length<=1&&(f=!0,m=yield t.getAllRemoteEntryAvailable(o,!1))):(f=!0,m=yield t.getAllRemoteEntryAvailable(o,!1));!n&&s<o.length;){try{let M=f?m[0]:yield t.getRemoteEntryByVersion(m);(yield t.loadRemoteEntryOnce(M,e.remoteName))&&(n=!0)}catch{}s+=1}return n})()}loadRouteWebComponent(e,t,o,n){let s=it(),f=s+"_res";return{path:t.remoteName,canActivate:o,data:{type:t.type,importName:t.remoteName,elementName:t.elementName,exposedModule:t.exposedModule,remoteEntry:t.remoteEntry,remoteEntrys:t.remoteEntrys,errorModule:n.errorModule,wrapperKey:e,stateId:s,stateIdRes:f},component:ct,children:[{path:"**",component:ct,data:{type:t.type,importName:t.remoteName,elementName:t.elementName,exposedModule:t.exposedModule,remoteEntry:t.remoteEntry,remoteEntrys:t.remoteEntrys,wrapperKey:e,errorModule:n.errorModule,stateId:s,stateIdRes:f}}]}}getRouteByMicrofrontendDesc(e,t,o){var n=this;const s=this.microfrontendRepository.getSecurityState(),f=this.microfrontendRepository.getTypeOfProtection();let p=[];return s&&f==ce.GLOBAL&&t.protected?p=[...o.protection.moduleGuards]:s&&f==ce.MODULE&&t.protected?p=[...o.protection.globalGuards]:s&&f==ce.MODULE&&!t.protected&&(p=[...o.protection.silentGuards]),"web-component"==t.type?this.loadRouteWebComponent(e,t,p,o):{path:t.remoteName,canActivate:p,data:{importName:t.remoteName,wrapperKey:e},loadChildren:(m=(0,d.Z)(function*(){return null!=t.remoteEntrys&&0!=t.remoteEntrys.length?n.loadRouteWithMultipleEntrys(t,o.errorModule):n.loadRouteWithSingleEntry(t,o.errorModule)}),function(){return m.apply(this,arguments)})};var m}getStaticRoute(e,t,o){const n=this.microfrontendRepository.getSecurityState(),s=this.microfrontendRepository.getTypeOfProtection();let f=[];return n&&s==ce.GLOBAL&&t?f=[...o.protection.moduleGuards]:n&&s==ce.MODULE&&t?f=[...o.protection.globalGuards]:n&&s==ce.MODULE&&!t&&(f=[...o.protection.silentGuards]),{...e,canActivate:f,data:{importName:e.path}}}loadMultipleRoute(e,t,o){return t.map(n=>this.getRouteByMicrofrontendDesc(e,n,o))}static#t=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(h.Store),l.\u0275\u0275inject(Z.jN),l.\u0275\u0275inject(ge))};static#r=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Fe=(()=>{class r{static#e=this.allModuleRef=[];constructor(e,t,o,n,s,f,p,m){this.compiler=e,this.injector=t,this.httpBackend=o,this.store=n,this.remoteLoader=s,this.microfrontendRepository=f,this.app=p,this.translateService=m,this.httpClient=new Z.eN(o)}getAuthorization(e,t,o,n,s){var f=this;return(0,d.Z)(function*(){return new Promise(function(){var p=(0,d.Z)(function*(m,M){let O=[];if(f.store.select(re).pipe((0,i.q)(1)).subscribe(L=>{L.securityEnabled&&(O=L.typeOfProtection==ce.GLOBAL?o:n)}),yield f.checkGuards(O,e,s)){let L;f.store.select(fe,e).pipe((0,i.q)(1)).subscribe(z=>L=z),null==L?m(!1):(L.exposedModule==t&&m(!0),m(L.otherModules.includes(t)))}else m(!1)});return function(m,M){return p.apply(this,arguments)}}())})()}checkGuards(e,t,o){var n=this;return new Promise(function(){var s=(0,d.Z)(function*(f,p){let m=yield e.reduce(function(){var M=(0,d.Z)(function*(O,x){let te,L=yield O,Q=n.injector.get(x).check(t,o);return te=(0,c.b)(Q)?yield Q.toPromise():Sr(Q)?yield Q:yield Promise.resolve(Q),Promise.resolve([...L,te])});return function(O,x){return M.apply(this,arguments)}}(),Promise.resolve([]));f(!m.includes(!1))});return function(f,p){return s.apply(this,arguments)}}())}loadRemoteComponentMicrofrontend(e,t){var o=this;return(0,d.Z)(function*(){return new Promise(function(){var n=(0,d.Z)(function*(s,f){const{importName:p,type:m,exposedModule:M,wrapper:O,elementName:x,errorModule:L,notAvailableModule:z,globalGuards:Q,moduleGuards:te}=e;let ne=o.remoteLoader.getRemoteEntrys(p);if(null!=ne.remoteEntrys)(yield o.remoteLoader.loadMultipleRemoteEntry({type:m,remoteName:p,remoteEntry:ne.remoteEntry,remoteEntrys:ne.remoteEntrys,exposedModule:M}))?(yield G({type:"module",remoteEntry:ne.remoteEntry,exposedModule:M}),"Module"==m&&(yield o.loadComponent({type:m,remoteEntrys:ne.remoteEntrys,wrapper:O,remoteName:p,exposedModule:M,moduleName:M.split("/")[1],componentName:x,errorModule:L,notAvailableModule:z,globalGuards:Q,moduleGuards:te})),s(pe.SUCCESS)):(o.store.dispatch(de({remoteName:p,error:"Error during the loading of "+p})),yield o.loadAndRenderComponents(L,t),s(pe.ERROR));else if(null!=ne.remoteEntry)try{yield o.remoteLoader.loadRemoteEntryOnce(ne.remoteEntry,p),yield G({type:"module",remoteEntry:ne.remoteEntry,exposedModule:M}),"Module"==m&&(yield o.loadComponent({type:m,remoteEntry:ne.remoteEntry,wrapper:O,remoteName:p,exposedModule:M,moduleName:M.split("/")[1],componentName:x,errorModule:L,notAvailableModule:z,globalGuards:Q,moduleGuards:te})),s(pe.SUCCESS)}catch{o.store.dispatch(de({remoteName:p,error:"Error during the loading of "+p})),yield o.loadAndRenderComponents(L,t),s(pe.ERROR)}else o.store.dispatch(de({remoteName:p,error:"Error during the loading of "+p})),yield o.loadAndRenderComponents(L,t),s(pe.ERROR)});return function(s,f){return n.apply(this,arguments)}}())})()}loadComponent(e,t){var o=this;return(0,d.Z)(function*(){return new Promise((n,s)=>{let f=!1;t&&o.store.dispatch(Ye({remoteName:e.remoteName})),o.store.select(fe,e.remoteName).subscribe(function(){var p=(0,d.Z)(function*(m){if(null!=m&&!f&&(!t||m.moduleInit)){f=!0;let M=yield o.initComponent(e.remoteName,e,m);n(M)}});return function(m){return p.apply(this,arguments)}}())})})()}initComponent(e,t,o){var n=this;return(0,d.Z)(function*(){return new Promise(function(){var s=(0,d.Z)(function*(f,p){let m;if(n.store.select(Oe,e).pipe((0,i.q)(1)).subscribe(M=>m=M),null!=o&&null!=m){const{stateId:M,stateIdRes:O}=yield n.createComponent({...t,remoteName:e,remoteEntry:o.remoteEntry,remoteEntrys:o.remoteEntrys});f({stateId:M,stateIdRes:O})}else p()});return function(f,p){return s.apply(this,arguments)}}())})()}createComponent(e){var t=this;let o=[];return this.store.select(re).pipe((0,i.q)(1)).subscribe(n=>{n.securityEnabled&&(o=n.typeOfProtection==ce.GLOBAL?e.moduleGuards:e.globalGuards)}),new Promise(function(){var n=(0,d.Z)(function*(s,f){let M,p=yield t.checkGuards(o,e.remoteName,e.wrapper),m={type:e.type,remoteName:e.remoteName,remoteEntry:e.remoteEntry,remoteEntrys:e.remoteEntrys,exposedModule:e.exposedModule};M=p?null!=e.remoteEntrys&&0!=e.remoteEntrys.length?t.remoteLoader.loadRouteWithMultipleEntrys(m,e.errorModule):t.remoteLoader.loadRouteWithSingleEntry(m,e.errorModule):Promise.resolve(e.notAvailableModule);let O=it(),x=O+"_res";r.allModuleRef.find(z=>z.remoteName==e.remoteName&&z.moduleName==e.moduleName)?s({stateId:O,stateIdRes:x}):M.then(z=>{t.compiler.compileModuleAsync(z).then(Q=>{const te=Q.create(t.injector);r.allModuleRef.push({remoteName:e.remoteName,moduleName:e.moduleName,moduleRef:te})}),s({stateId:O,stateIdRes:x})})});return function(s,f){return n.apply(this,arguments)}}())}loadAndRenderComponents(e,t){var o=this;return(0,d.Z)(function*(){if(null!=t){let n;t.clear(),n=e instanceof l.NgModuleFactory?e:yield o.compiler.compileModuleAsync(e);const p=n.create(o.injector).componentFactoryResolver.resolveComponentFactory(n.moduleType.rootComponent);t.createComponent(p)}})()}loadModule(e,t,o){var n=this;return(0,d.Z)(function*(){return new Promise((s,f)=>{let p=r.allModuleRef.find(m=>m.remoteName==e&&m.moduleName==t);if(p)try{void 0!==p.moduleRef.instance.init&&p.moduleRef.instance.init(),s(!0)}catch(m){console.error(m),f(m)}else{let m;if(o[t.split("/")[1]]instanceof l.NgModuleFactory)m=o[t.split("/")[1]],r.allModuleRef.push({remoteName:e,moduleName:t,moduleRef:m}),s(!0);else{let M=(0,l.createNgModule)(o[t.split("/")[1]],n.app.injector);r.allModuleRef.push({remoteName:e,moduleName:t,moduleRef:M}),s(!0)}}})})()}loadMultipleModulesByMicrofrontenKey(e){var t=this;return(0,d.Z)(function*(){return new Promise(function(){var o=(0,d.Z)(function*(n,s){let f=[];for(let p=0;p<e.length;p++){let m=yield t.initModule(e[p]);f.push(m)}f.length==e.length&&(e.forEach((p,m)=>{f[m]&&t.store.dispatch(ue({remoteName:p.remoteName,loaded:!0}))}),n(!f.includes(!1)))});return function(n,s){return o.apply(this,arguments)}}())})()}initModule(e){var t=this;return(0,d.Z)(function*(){return new Promise(function(){var o=(0,d.Z)(function*(n,s){if(e.remoteEntrys)if(yield t.remoteLoader.loadMultipleRemoteEntry(e)){let p=yield G({type:"module",remoteEntry:e.remoteEntry,exposedModule:e.exposedModule});("Module"==e.type||"Module_Service"==e.type)&&(yield t.loadModule(e.remoteName,e.exposedModule,p)),n(!0)}else s("No remote entry available"),t.store.dispatch(Le({toasterType:ve.error,message:t.translateService.instant("error-loading-microfront")})),t.store.dispatch(ye({delay:0}));else if(e.remoteEntry)t.remoteLoader.loadRemoteEntryOnce(e.remoteEntry,e.remoteName).then((0,d.Z)(function*(){let f=yield G({type:"module",remoteEntry:e.remoteEntry,exposedModule:e.exposedModule});("Module"==e.type||"Module_Service"==e.type)&&(yield t.loadModule(e.remoteName,e.exposedModule,f)),n(!0)})).catch(function(){var f=(0,d.Z)(function*(p){s("No remote entry available"),t.store.dispatch(Le({toasterType:ve.error,message:t.translateService.instant("error-loading-microfront")})),t.store.dispatch(ye({delay:0}))});return function(p){return f.apply(this,arguments)}}());else{let f=yield G({type:"module",remoteEntry:e.remoteEntry,exposedModule:e.exposedModule});("Module"==e.type||"Module_Service"==e.type)&&(yield t.loadModule(e.remoteName,e.exposedModule,f)),n(!0)}});return function(n,s){return o.apply(this,arguments)}}())})()}getStateOfMicrofrontendServices(e){return new Promise((t,o)=>{let n=[],s=[],f=this.microfrontendRepository.getShellName();if(e===f){let p=this.microfrontendRepository.getMicrofrontends();n=p?p.filter(m=>"Module_Service"===m.type).map(m=>m.remoteName):[]}else this.store.select(fe,e).pipe((0,i.q)(1)).subscribe(p=>n=null!=p.sources?p.sources:[]);0===n.length&&t(!1),n.forEach(p=>{this.store.select(Er,p).subscribe(m=>{null!=m&&m.loaded&&s.push(!0),s.length==n.length&&t(!0)})})})}static#t=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(l.Compiler),l.\u0275\u0275inject(l.Injector),l.\u0275\u0275inject(Z.jN),l.\u0275\u0275inject(h.Store),l.\u0275\u0275inject(Ge),l.\u0275\u0275inject(ge),l.\u0275\u0275inject(l.ApplicationRef),l.\u0275\u0275inject(xt.TranslateService))};static#r=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Gr=(()=>{class r{constructor(e,t,o,n,s,f){var p=this;this.actions$=e,this.store=t,this.spinnerRepository=o,this.dynamicLoaderService=n,this.initMfService=s,this.router=f,this.retrieveMicrofrontends$=(0,V.createEffect)(()=>this.actions$.pipe((0,V.ofType)(xe),(0,A.w)(({appKey:m})=>{let M;return null!=Nt&&(M=Nt.find(O=>O.appKey==m)),null!=M?M.lookupHttpCall().pipe((0,y.U)(O=>{let x=[],L=[];return O.forEach((z,Q)=>{null!=z.remoteName?x.push({...z,index:Q+1,loadState:{loaded:!1,microfrontendsAdded:!1,error:void 0}}):L.push({...z,index:Q+1})}),Et({microfrontends:x,staticRoutes:L,appKey:m})}),(0,E.K)(O=>(0,R.of)(He({error:O})))):(0,R.of)(He({error:"Intance not yet loaded"}))}))),this.initModuleByRemoteName$=(0,V.createEffect)(()=>this.actions$.pipe((0,V.ofType)(Ye),(0,y.U)(function(){var m=(0,d.Z)(function*({remoteName:M}){let O;p.store.select(At).pipe((0,i.q)(1)).subscribe(L=>O=L);let x=O.find(L=>L.remoteName==M);if(x&&null!=x.initModuleName){p.spinnerRepository.show(!1);let L=x.initModuleName.map(z=>({type:x.type,remoteName:x.remoteName,remoteEntry:x.remoteEntry,remoteEntrys:x.remoteEntrys,exposedModule:z}));yield p.dynamicLoaderService.loadMultipleModulesByMicrofrontenKey(L),p.spinnerRepository.hide(0)}});return function(M){return m.apply(this,arguments)}}())),{dispatch:!1}),this.resetConf$=(0,V.createEffect)(()=>this.actions$.pipe((0,V.ofType)(pt),(0,y.U)(({routerConfig:m})=>{this.initMfService.appInit=!1,localStorage.setItem("ASKED_ROUTE","/"),this.router.resetConfig(m),this.router.url.includes("#")?this.router.navigate([location.pathname],{fragment:location.hash.split("#")[1]}):this.router.navigate([this.router.url]),this.store.dispatch(mt()),this.store.dispatch(rt()),this.store.dispatch(Je())})),{dispatch:!1})}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(V.Actions),l.\u0275\u0275inject(h.Store),l.\u0275\u0275inject(lt),l.\u0275\u0275inject(Fe),l.\u0275\u0275inject(Be),l.\u0275\u0275inject(_.Router))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Fr=(()=>{class r{constructor(e,t,o){this.actions$=e,this.store=t,this.moduleRouteRepository=o,this.setModulesByKey$=(0,V.createEffect)(()=>this.actions$.pipe((0,V.ofType)(Te),(0,y.U)(({modules:n,appKey:s})=>{let f;if(this.store.select(Se).pipe((0,i.q)(1)).subscribe(p=>f=p),s!=f){let p;this.store.select(Oe,s).pipe((0,i.q)(1)).subscribe(M=>p=M);let m=this.moduleRouteRepository.getSubRoutesAvailability(p,n);this.store.dispatch(et({key:s.toString(),routes:m}))}else{let p;this.store.select(je).pipe((0,i.q)(1)).subscribe(m=>p=m),this.moduleRouteRepository.setRoutesByModule(p,n)}})),{dispatch:!1})}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(V.Actions),l.\u0275\u0275inject(h.Store),l.\u0275\u0275inject(Ie))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),_r=(()=>{class r{constructor(e,t,o){this.actions$=e,this.store=t,this.moduleRouteRepository=o,this.setSubRouteByKey$=(0,V.createEffect)(()=>this.actions$.pipe((0,V.ofType)(Rt),(0,y.U)(({key:n,routes:s})=>{let f;this.store.select(_e,n).pipe((0,i.q)(1)).subscribe(m=>f=m);let p=this.moduleRouteRepository.getSubRoutesAvailability({key:n,subRoutes:s},f?f.modules:[]);this.store.dispatch(et({key:n,routes:p}))})),{dispatch:!1})}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(V.Actions),l.\u0275\u0275inject(h.Store),l.\u0275\u0275inject(Ie))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Ur=(()=>{class r{constructor(e,t){this.actions$=e,this.store=t,this.show$=(0,V.createEffect)(()=>this.actions$.pipe((0,V.ofType)(be),(0,y.U)(({})=>{let n;this.store.select(at).pipe((0,i.q)(1)).subscribe(f=>n=f);let s={...n};return vt({element:s._element})})))}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(V.Actions),l.\u0275\u0275inject(h.Store))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();var ve=function(r){return r[r.success=0]="success",r[r.error=1]="error",r[r.warning=2]="warning",r}(ve||{});let Br=(()=>{class r{constructor(e,t){this.actions$=e,this.toasterService=t,this.showToaster$=(0,V.createEffect)(()=>this.actions$.pipe((0,V.ofType)(Le),(0,y.U)(({toasterType:o,message:n})=>{switch(o){case ve.success:this.toasterService.success(n);break;case ve.error:this.toasterService.error(n);break;case ve.warning:this.toasterService.warning(n)}})),{dispatch:!1})}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(V.Actions),l.\u0275\u0275inject($t._W))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Vr=(()=>{class r{constructor(e,t){this.actions$=e,this.store$=t,this.setCurrentLang$=(0,V.createEffect)(()=>this.actions$.pipe((0,V.ofType)(nt),(0,y.U)(({lang:o})=>{localStorage.setItem("current_lang",o)})),{dispatch:!1})}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(V.Actions),l.\u0275\u0275inject(h.Store))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();const $n=(0,h.createReducer)([],(0,h.on)(Te,(r,{modules:S,appKey:e})=>null!=r.find(o=>o.key==e)?[...r.map(o=>o.key===e?{...o,modules:S}:o)]:[...r,{key:e,modules:S}]),(0,h.on)(Je,r=>[]));function Kr(r,S){return $n(r,S)}const Ct=(0,h.createFeatureSelector)("_modulesState"),Zr=(0,h.createSelector)(Ct,r=>r),_e=(0,h.createSelector)(Ct,(r,S)=>r.find(e=>e.key==S));let Ie=(()=>{class r{constructor(e){this.store=e}setRoutes(e){this.store.dispatch(Qe({routes:e}))}navigateTo(e){this.store.dispatch(qe({path:e}))}setSubRoutesByKey(e,t){this.store.dispatch(Rt({key:e,routes:t}))}setCurrentRoute(e){this.store.dispatch(tt({key:e}))}resetRoutes(){this.store.dispatch(rt())}routeAvailable$(e,t){return new g.y(o=>{(0,I.a)([this.store.select(Oe,e),this.store.select(_e,t)]).subscribe(([n,s])=>{o.next(n&&s?s.modules.includes(n.linkedRouteKey?n.linkedRouteKey:n.key):!!n&&(null==n.hidden||0==n.hidden))})})}routeAvailable(e,t){let o,n;return this.store.select(Oe,e).pipe((0,i.q)(1)).subscribe(s=>o=s),this.store.select(_e,t).pipe((0,i.q)(1)).subscribe(s=>n=s),o&&n?n.modules.includes(o.linkedRouteKey?o.linkedRouteKey:o.key):!!o&&(null==o.hidden||0==o.hidden)}getSubRoutesAvailability(e,t){return e.subRoutes.map(o=>o.linkedRouteKey?{...o,hidden:t&&0!=t.length?!t.includes(o.linkedRouteKey):o.hidden}:o.subRoutes&&0!=o.subRoutes.length?{...o,subRoutes:this.getSubRoutesAvailability(o,t)}:{...o})}getRoutesAvailability(e,t){return e.map(o=>({...o,hidden:1==o.hidden&&t&&0!=t.length?!t.includes(o.key):o.hidden}))}setRoutesByModule(e,t){let o=this.getRoutesAvailability(e,t);this.store.dispatch(Qe({routes:o}))}getRouteAsModuleByKey(e){return ae(this.getRouteAsModuleByKey$(e))}getRouteAsModuleByKey$(e){return this.store.select(Oe,e)}getRoutes(){return ae(this.getRoutes$())}getRoutes$(){return this.store.select(je)}getCurrentRoute$(){return this.store.select(wr)}getCurrentRoute(){return ae(this.getCurrentRoute$())}getLastNavigation$(){return this.store.select($r)}getLastNavigation(){return ae(this.getLastNavigation$())}getRoutingTreeState$(){return this.store.select(Lt)}getRoutingTreeState(){return ae(this.getRoutingTreeState$())}getCurrentKeySelected$(){return this.store.select(Dr)}getCurrentKeySelected(){return ae(this.getCurrentKeySelected$())}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(h.Store))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Wr=(()=>{class r{constructor(e,t,o,n){this.store=e,this.routeModuleRepository=t,this.router=o,this.microfrontendRepository=n}canActivate(e,t){const{importName:o,wrapperKey:n}=e.data;let s=this.check(o,n);return s||this.router.navigate(["/"]),s}check(e,t){let o=this.microfrontendRepository.getMicrofrontendByKey(e);return o=o??this.microfrontendRepository.getStaticRouteAsModule(e),!o.protected||(t=t??this.microfrontendRepository.getShellName(),this.routeModuleRepository.routeAvailable(e,t))}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(h.Store),l.\u0275\u0275inject(Ie),l.\u0275\u0275inject(_.Router),l.\u0275\u0275inject(ge))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Ne=(()=>{class r{constructor(e,t,o){this.router=e,this.store=t,this.routeRepository=o}canActivate(e,t){return this.redirectionWithGlobalRoutes(e.data.redirectKey),!0}redirectionWithGlobalRoutes(e){let t=this.routeRepository.getRoutes()??[],o=localStorage.getItem("ASKED_ROUTE");o&&!o.includes("#state")?this.redirectionTo(t,e,o):this.redirectionTo(t,e)}routeIsIn(e,t,o){if(0===o.length)return{valid:!0,pathSplit:o};let n=t.find(s=>s.key==o[0]);return this.checkRoute(n)?void 0!==n.subRoutes?this.routeIsIn(e,n.subRoutes,o.splice(1)):void 0!==n.linkedRouteKey?this.checkRoute(n)?this.routeIsIn(e,e.find(s=>s.key==t[0].linkedRouteKey).subRoutes,o.splice(1)):{valid:!1,pathSplit:o}:this.routeIsIn(e,[],o.splice(1)):{valid:!1,pathSplit:o}}buildPathByKeys(e,t,o,n,s){if(0===o.length)return n;if(0===t.length){let p=o.find(m=>m.index==s);if(null==p&&(p=o[s]),p.subRoutes){if(this.checkRoute(p))return this.buildPathByKeys(e,[],p.subRoutes,n+"/"+p.key,0);let m=s+1;return void 0!==o[m]?this.buildPathByKeys(e,[],o,n,m):n}if(p.linkedRouteKey){if(this.checkRoute(p)){let M=e.find(x=>x.key==p.linkedRouteKey);return this.buildPathByKeys(e,[],M.subRoutes,n+"/"+M.key,0)}let m=s+1;return null!=o[m]?this.buildPathByKeys(e,[],o,n,m):n}return n+"/"+p.key}let f=o.find(p=>p.key==t[s]);if(this.checkRoute(f)){let p=n+"/"+f.key;return this.buildPathByKeys(e,t.splice(1),f.subRoutes,p,s)}return n}redirectionTo(e,t,o){let f,n=localStorage.getItem("ASKED_ROUTE");if(n=st(n).path,null!=n){let p=[...n.split("/").splice(1)],m=this.routeIsIn(e,e,[...p]);if(m.valid)f=n;else if(m.valid||null==t){let M=p.splice(0,p.length-m.pathSplit.length);f=null==M?e.filter(O=>O.main&&O.navigable&&(null==O.hidden||0==O.hidden)).sort((O,x)=>O.index-x.index)[0].path:this.buildPathByKeys(e,[...M],e.filter(O=>O.main&&O.navigable),"",0)}else{let M=p.splice(0,p.length-m.pathSplit.length);f=0!=M.length?"/"+M.join("/")+"/"+t:"/"+t;let O=[...f.split("/").splice(1)];this.routeIsIn(e,e,[...O]).valid||(f=this.buildPathByKeys(e,[...M],e.filter(L=>L.main&&L.navigable),"",0))}}else{let p;void 0!==t&&(p=e.find(m=>m.key===t&&m.main&&m.navigable&&(null==m.hidden||0==m.hidden))),p=p??e.filter(m=>m.main&&m.navigable&&(null==m.hidden||0==m.hidden)).sort((m,M)=>m.index-M.index)[0],void 0!==p&&(f=p.path)}if(""!=f)if(null!=o){let p=st(o);this.router.navigate([f],p.params)}else this.router.navigate([f])}checkRoute(e){return void 0!==e&&(void 0===e.hidden||!1===e.hidden)&&(void 0===e.main||!1===e.main||e.main&&e.navigable)}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(_.Router),l.\u0275\u0275inject(h.Store),l.\u0275\u0275inject(Ie))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Hr=(()=>{class r{constructor(e){this._config=e}info(e,...t){}debug(e,...t){this._config.debug&&console.debug(e,t&&t.length>0?t:null)}error(e,...t){this._config.error&&console.error(e,t&&t.length>0?t:null)}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(Ot))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),kr=(()=>{class r{getToken(e){const t=nn.utc().format();let o="";for(let n=0;n<t.length;n++){const f=(+t.charCodeAt(n)+20)%128;o+=String.fromCharCode(f)}return o="username="+e+";validation="+o,window.btoa(o)}static#e=this.\u0275fac=function(t){return new(t||r)};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Xr=(()=>{class r extends ht.ViewportScroller{setOffset(e){console.warn("Not implemented")}getScrollPosition(){return console.warn("Not implemented"),null}scrollToPosition(e){console.warn("Not implemented")}scrollToAnchor(e){let t=this.findAnchorFromDocument(window.document,e);t?.scrollIntoView()}setHistoryScrollRestoration(e){console.warn("Not implemented")}findAnchorFromDocument(e,t){const o=e.getElementById(t)||e.getElementsByName(t)[0];if(o)return o;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let s=n.currentNode;for(;s;){const f=s.shadowRoot;if(f){const p=f.getElementById(t)||f.querySelector(`[name="${t}"]`);if(p)return p}s=n.nextNode()}}return null}static#e=this.\u0275fac=function(){let e;return function(o){return(e||(e=l.\u0275\u0275getInheritedFactory(r)))(o||r)}}();static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Ue=(()=>{class r{constructor(e,t,o,n,s){this.activatedRoute=e,this.router=t,this.remoteLoaderService=o,this.globalStoreService=n,this.microfrontendRepository=s,this.unSubscribe$=new a.x}ngOnDestroy(){this.unSubscribe$.next(),this.unSubscribe$.complete()}ngOnInit(){var e=this;return(0,d.Z)(function*(){e.activatedRoute.data.pipe((0,T.R)(e.unSubscribe$)).subscribe(t=>{const{initModel:o,wrapperKey:n,microfrontendKeys:s}=t.config,f=e.getCurrentMicrofrontendByKeys(s);new Promise(function(){var m=(0,d.Z)(function*(M,O){let x=yield e.remoteLoaderService.checkMicrofrontendAvailability(f);null!=f.loadState.error?(e.globalStoreService.emitAction("SHOW",{hidding:!1}),M(e.setRouteAndResetState(n,x,f,o))):(x||e.microfrontendRepository.setErrorLoaded(f.remoteName,"Module indisponible"),M({state:!1,reload:!1}))});return function(M,O){return m.apply(this,arguments)}}()).then(m=>{null!=m&&(e.globalStoreService.emitAction("HIDE",{}),m.state&&m.reload&&e.reloadCurrentRoute())})})})()}reloadCurrentRoute(){const e=this.router.url;this.router.resetConfig(this.router.config),e.includes("#")?this.router.navigate([location.pathname],{fragment:location.hash.split("#")[1]}):this.router.navigate([e])}setRouteAndResetState(e,t,o,n){let s;if(t){s={state:!0,reload:this.router.url.includes("/"+o.remoteName)};let f=this.remoteLoaderService.getRouteByMicrofrontendDesc(e,o,n);this.activatedRoute.routeConfig.children=[f,...this.activatedRoute.routeConfig.children.filter(p=>p.path!=o.remoteName)],this.microfrontendRepository.setErrorLoaded(o.remoteName,void 0)}else s={state:!1,reload:!1};return s}getCurrentMicrofrontendByKeys(e){const t=this.activatedRoute.snapshot.pathFromRoot.filter(s=>void 0!==s.data&&void 0!==s.data.config&&void 0!==s.data.config.initModel),o=[...this.router.url.split("/").slice(1)];let n;if(0!==o.length&&0!==t.length&&(n=o[t.length-1]),void 0!==n&&e.includes(n))return this.microfrontendRepository.getMicrofrontendByKey(n);throw new Error("The microfrontend is not registered")}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275directiveInject(_.ActivatedRoute),l.\u0275\u0275directiveInject(_.Router),l.\u0275\u0275directiveInject(Ge),l.\u0275\u0275directiveInject(Ae),l.\u0275\u0275directiveInject(ge))};static#t=this.\u0275cmp=l.\u0275\u0275defineComponent({type:r,selectors:[["bl-microfront-router-component"]],decls:1,vars:0,template:function(t,o){1&t&&l.\u0275\u0275element(0,"router-outlet")},dependencies:[_.RouterOutlet],styles:["[_nghost-%COMP%]{width:100%}"]})}return r})(),Be=(()=>{class r{constructor(e,t,o,n,s,f,p,m,M){this.router=e,this.remoteLoaderService=t,this.httpBackend=o,this.routeModuleRepository=n,this.redirectionGuard=s,this.dynamicLoaderService=f,this.store=p,this.activatedRoute=m,this.globalStoreService=M,this.appInit=!1,this.configUserInit=!1,this.mfeInit={},this.mfeInitUser={},this.mfeInitLoadSource={},this.httpClient=new Z.eN(o)}initCustomServices(e){let t,o;if(this.store.select(re).pipe((0,i.q)(1)).subscribe(n=>{null!=n.securityEnabled&&(t=n.securityEnabled)}),this.store.select(Se).pipe((0,i.q)(1)).subscribe(n=>o=n),e!=o&&t){let n;this.globalStoreService.subscribeToStateFromGlobalStore("_authState").subscribe(s=>{if(null!=s&&null!=s._authUser&&(null==this.mfeInitUser||null!=this.mfeInitUser&&!this.mfeInitUser[e.toString()])){let f;n=s._authUser,0!=we.length&&(f=we.find(p=>p.appKey==e)),f?.getModules(s._authUser).subscribe(p=>{this.store.dispatch(Te({modules:p,appKey:e}))}),this.mfeInitUser[e.toString()]=!0}})}this.store.dispatch(xe({appKey:e}))}loadSourceForMicrofrontend(e){var t=this;return(0,d.Z)(function*(){let o=[];for(let n=0;n<e.length;n++){const s=e[n];let f;t.store.select(fe,s).pipe((0,i.q)(1)).subscribe(p=>f=p),null==f&&t.store.select(ot,s).pipe((0,i.q)(1)).subscribe(p=>f=p),null!=f.sources&&f.sources.filter(p=>!o.includes(p)).forEach(p=>o.push(p))}yield t.loadSources(o)})()}loadSources(e){var t=this;return(0,d.Z)(function*(){let o=e.map(n=>{let s;return t.store.select(fe,n).pipe((0,i.q)(1)).subscribe(f=>s=f),null==s?null:{remoteEntry:s.remoteEntry,remoteName:s.remoteName,exposedModule:s.exposedModule,remoteEntrys:s.remoteEntrys,type:s.type}}).filter(n=>null!=n);yield t.dynamicLoaderService.loadMultipleModulesByMicrofrontenKey(o)})()}loadInitMicrofront(e){var t=this;return(0,d.Z)(function*(){let o=[];e.forEach(n=>{let s;if(t.store.select(fe,n).pipe((0,i.q)(1)).subscribe(f=>s=f),null==s)return null;s.initModuleName.forEach(f=>o.push({remoteEntry:s.remoteEntry,remoteName:s.remoteName,exposedModule:f,remoteEntrys:s.remoteEntrys,type:s.type}))}),o=o.filter(n=>null!=n),yield t.dynamicLoaderService.loadMultipleModulesByMicrofrontenKey(o)})()}retrieveMicrofrontendsByKey(e){var t=this;return new Promise((o,n)=>{let s;this.globalStoreService.subscribeToStateFromGlobalStore("_authState").subscribe(function(){var p=(0,d.Z)(function*(m){null!=m&&s!=m._authUser&&(s=m._authUser)});return function(m){return p.apply(this,arguments)}}());let f=[];this.store.select(je).subscribe(p=>f=p),this.store.select(re).subscribe(function(){var p=(0,d.Z)(function*(m){if(null!=m&&null!=m.microfrontends&&0!=m.microfrontends.length)if(null==f)(null==t.mfeInitLoadSource||null!=t.mfeInitLoadSource&&!t.mfeInitLoadSource[e.toString()])&&(yield t.setRoutesByModules(e,m.microfrontends,s,m.typeOfProtection,!1,m.securityEnabled),t.mfeInitLoadSource[e.toString()]=!0,yield t.loadSourceForMicrofrontend([e]),t.store.dispatch(ue({remoteName:e,loaded:!0})));else{let M=m.microfrontends.filter(x=>null==f.find(L=>L.key==x.remoteName)),O=m.microfrontends.find(x=>x.remoteName==e);if(0!=M.length)(null==t.mfeInitLoadSource||null!=t.mfeInitLoadSource&&!t.mfeInitLoadSource[e.toString()])&&(yield t.setRoutesByModules(e,M,s,m.typeOfProtection,!1,m.securityEnabled),t.mfeInitLoadSource[e.toString()]=!0,yield t.loadSourceForMicrofrontend([e]),t.store.dispatch(ue({remoteName:e,loaded:!0})));else if(0==M.length&&null!=O&&O.loadState.microfrontendsAdded&&!O.loadState.loaded)(null==t.mfeInitLoadSource||null!=t.mfeInitLoadSource&&!t.mfeInitLoadSource[e.toString()])&&(t.mfeInitLoadSource[e.toString()]=!0,yield t.loadSourceForMicrofrontend([e]),t.store.dispatch(ue({remoteName:e,loaded:!0})));else if(0==M.length&&null==O){let x;t.store.select(De).pipe((0,i.q)(1)).subscribe(L=>x=L),null!=x&&x.microfrontendsAdded&&!x.loaded&&(null==t.mfeInitLoadSource||null!=t.mfeInitLoadSource&&!t.mfeInitLoadSource[e.toString()])&&(t.mfeInitLoadSource[e.toString()]=!0,yield t.loadSourceForMicrofrontend([e]),t.store.dispatch(ue({remoteName:e,loaded:!0})))}}else if(null!=m&&null!=m.microfrontends&&0==m.microfrontends.length){let M;t.store.select(De).pipe((0,i.q)(1)).subscribe(O=>M=O),null!=M&&M.microfrontendsAdded&&!M.loaded&&(null==t.mfeInitLoadSource||null!=t.mfeInitLoadSource&&!t.mfeInitLoadSource[e.toString()])&&(t.mfeInitLoadSource[e.toString()]=!0,yield t.loadSourceForMicrofrontend([e]),t.store.dispatch(ue({remoteName:e,loaded:!0})))}});return function(m){return p.apply(this,arguments)}}()),this.initCustomServices(e)})}initMicrofrontendStore(e){var t=this;return(0,d.Z)(function*(){return new Promise((n,s)=>{t.store.select(fe,e).subscribe(f=>{if(null!=f&&1==f.loadState.loaded)n(!0);else if(null!=f&&0==f.loadState.loaded)(null==t.mfeInit||null!=t.mfeInit&&!t.mfeInit[e.toString()])&&(t.mfeInit[e.toString()]=!0,t.retrieveMicrofrontendsByKey(e));else if(null==f){let p;t.store.select(De).pipe((0,i.q)(1)).subscribe(m=>p=m),!p.loaded&&t.appInit&&(null==t.mfeInit||null!=t.mfeInit&&!t.mfeInit[e.toString()])&&(t.mfeInit[e.toString()]=!0,t.retrieveMicrofrontendsByKey(e))}}),t.store.select(De).subscribe(f=>{f.loaded&&n(!0)})})})()}loadMicrofrontends(e,t,o,n){var s=this;return(0,d.Z)(function*(){return yield new Promise((p,m)=>{s.globalStoreService.subscribeToStateFromGlobalStore("_microfrontendState").pipe((0,i.q)(1)).subscribe(function(){var M=(0,d.Z)(function*(O){let x=[];if(null!=O.microfrontends&&0!=O.microfrontends.length){let Q=[];Q=O.microfrontends.filter(null==o||0==o.length?te=>te.navigable:te=>te.navigable&&o.includes(te.remoteName)),x=s.remoteLoaderService.loadMultipleRoute(e,Q,n)}let z,L=[];null!=n.staticRoutesAsModule&&(L=n.staticRoutesAsModule.reduce((Q,te)=>{let ne;return s.store.select(ot,te.path).pipe((0,i.q)(1)).subscribe(ut=>ne=ut),ne&&ne.navigable&&Q.push(s.remoteLoaderService.getStaticRoute(te,ne.protected,n)),Q},[])),null!=n.staticRoutes&&(L=[...n.staticRoutes,...L]),s.store.select(Se).pipe((0,i.q)(1)).subscribe(Q=>z=Q),Array.isArray(t)?s.router.config=L?[{path:"",canActivate:O.securityEnabled?[...n.wrapper.guards]:[],component:n.wrapper.component,children:[...L,...x.map(Q=>({path:"",component:Ue,data:{config:{microfrontendKeys:O.microfrontends.map(te=>te.remoteName),wrapperKey:z,initModel:n}},children:[Q]})),{path:"**",component:Me,canActivate:[Ne],data:{redirectKey:n.redirectKey}}]}]:[{path:"",canActivate:O.securityEnabled?[...n.wrapper.guards]:[],component:n.wrapper.component,children:[...x.map(Q=>({path:"",component:Ue,data:{config:{microfrontendKeys:O.microfrontends.map(te=>te.remoteName),wrapperKey:z,initModel:n}},children:[Q]})),{path:"**",component:Me,canActivate:[Ne],data:{redirectKey:n.redirectKey}}]}]:"**"==t.path?(t.path="",t.component=n.wrapper&&n.wrapper.component?n.wrapper.component:Ue,t.canActivate=n.wrapper&&n.wrapper.guards?[...n.wrapper.guards]:[],t.children=L?[...L,...x,{path:"**",component:Me,canActivate:[Ne],data:{redirectKey:n.redirectKey}}]:[...x,{path:"**",component:Me,canActivate:[Ne],data:{redirectKey:n.redirectKey}}]):t.children.unshift(...x),p(!0)});return function(O){return M.apply(this,arguments)}}())})})()}initShell(e,t,o){var n=this;return(0,d.Z)(function*(){return n.initModel={...e},n.initSecurity(t,o),yield new Promise((f,p)=>{let m,M;n.store.select(Se).pipe((0,i.q)(1)).subscribe(O=>m=O),n.initCustomServices(m),n.globalStoreService.subscribeToStateFromGlobalStore("_authState").subscribe(function(){var O=(0,d.Z)(function*(x){null==x||M==x._authUser||n.configUserInit||(M=x._authUser,null==M||null==n.modules)||(yield n.setRoutesByModules(m,n.modules,M,o,!0,t),n.redirectToAnAvailableRoute(n.initModel.redirectKey),n.configUserInit=!0)});return function(x){return O.apply(this,arguments)}}()),n.store.select(re).subscribe(function(){var O=(0,d.Z)(function*(x){let L=[];if(!n.appInit&&null!=x&&null!=x.microfrontends){if(n.appInit=!0,n.modules=[...x.microfrontends],void 0!==n.initModel.staticRoutes){const z=n.initModel.staticRoutes.map(Q=>({key:Q.path,iconName:"",navigable:!0,protected:!1,inMenu:!1,...Q.data?Q.data:{}}));n.modules=[...n.modules,...z]}null!=x.staticRoutes&&((null==n.mfeInitLoadSource||null!=n.mfeInitLoadSource&&!n.mfeInitLoadSource[m.toString()])&&(n.mfeInitLoadSource[m.toString()]=!0,yield n.loadSources(x.microfrontends.filter(z=>"Module_Service"===z.type).map(z=>z.remoteName))),n.modules=[...n.modules,...x.staticRoutes]),null!=n.modules&&0!=n.modules.length&&(L=yield n.setRoutesByModules(m,n.modules,M,o,!0,t),n.store.dispatch(ue({remoteName:m,loaded:!0})),M&&(n.configUserInit=!0)),yield n.loadMicrofrontends(m,n.router.config,void 0,n.initModel),yield n.loadInitMicrofront(x.microfrontends.filter(z=>z.upSubMenus).map(z=>z.remoteName)),f(!0),null!=M?n.redirectToAnAvailableRoute(n.initModel.redirectKey):n.reloadCurrentRoute(n.initModel.redirectKey)}});return function(x){return O.apply(this,arguments)}}())})})()}redirectToAnAvailableRoute(e){let t;this.store.select(Se).pipe((0,i.q)(1)).subscribe(p=>t=p);let o=localStorage.getItem("ASKED_ROUTE"),n=o?o.split("/")[1]:void 0,s=[];this.store.select(je).subscribe(p=>s=p);let f=s.find(p=>p.key==n);f&&this.routeModuleRepository.routeAvailable(f.key,t)?this.reloadCurrentRoute(e):this.redirectionGuard.redirectionWithGlobalRoutes(e)}reloadCurrentRoute(e){const t=this.router.url;let o=localStorage.getItem("ASKED_ROUTE");if(o&&!t.includes("#state")){let n=st(o);this.router.navigate([n.path],n.params)}else this.redirectionGuard.redirectionWithGlobalRoutes(e)}initSecurity(e,t){this.store.dispatch(ke({securityEnabled:e})),this.store.dispatch(Xe({typeOfProtection:t}))}setRoutesByModules(e,t,o,n,s,f){return new Promise((p,m)=>{let O,M=t.map(x=>null!=x.remoteName?{key:x.remoteName,path:"/"+x.remoteName,index:x.index,icon:x.iconName,navigable:x.navigable,externalLink:!1,inMenu:null==x.inMenu||x.inMenu,main:s,hidden:!!f&&x.protected,upSubMenus:null!=x.upSubMenus&&x.upSubMenus,group:x.group,customLeftMenuAction:null!=x.customLeftMenuAction&&x.customLeftMenuAction,inSitemap:x.inSitemap,subRoutes:[]}:{key:x.key,path:x.externalLink?x.externalLink:"/"+x.key,icon:x.iconName,index:x.index,navigable:x.navigable,inMenu:null==x.inMenu||x.inMenu,externalLink:null!=x.externalLink,main:s,hidden:!!f&&x.protected,upSubMenus:!1,group:x.group,customLeftMenuAction:null!=x.customLeftMenuAction&&x.customLeftMenuAction,inSitemap:x.inSitemap,subRoutes:[]});0!=we.length&&(O=we.find(x=>x.appKey==e)),O?.getModules(o).subscribe(x=>{this.routeModuleRepository.setRoutesByModule(M,x),this.store.dispatch(Te({modules:x,appKey:e})),p(x)})})}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275inject(_.Router),l.\u0275\u0275inject(Ge),l.\u0275\u0275inject(Z.jN),l.\u0275\u0275inject(Ie),l.\u0275\u0275inject(Ne),l.\u0275\u0275inject(Fe),l.\u0275\u0275inject(h.Store),l.\u0275\u0275inject(_.ActivatedRoute),l.\u0275\u0275inject(Ae))};static#t=this.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Yr=(()=>{class r{constructor(e,t,o){this.globalStoreService=e,this.activatedRoute=t,this.appInitService=o,this.unSubscribe$=new a.x}ngOnDestroy(){this.globalStoreService.emitAction("HIDE",{}),this.unSubscribe$.next(),this.unSubscribe$.complete()}ngOnInit(){var e=this;return(0,d.Z)(function*(){e.globalStoreService.emitAction("SHOW",{hidding:!0}),e.activatedRoute.data.pipe((0,T.R)(e.unSubscribe$)).subscribe(function(){var t=(0,d.Z)(function*(o){if(null==o||null==o.config)throw new Error("You must provide a LoaderShell configuration. Did you implement the LoaderShellResolver ?");const{initModel:n,securityEnabled:s,typeOfProtection:f}=o.config;yield e.appInitService.initShell(n,s,f)});return function(o){return t.apply(this,arguments)}}())})()}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275directiveInject(Ae),l.\u0275\u0275directiveInject(_.ActivatedRoute),l.\u0275\u0275directiveInject(Be))};static#t=this.\u0275cmp=l.\u0275\u0275defineComponent({type:r,selectors:[["bl-microfront-shell-loader"]],decls:0,vars:0,template:function(t,o){},encapsulation:2})}return r})(),zr=(()=>{class r{constructor(e,t,o,n){this.router=e,this.appInitService=t,this.globalStoreService=o,this.activatedRoute=n,this.unSubscribe$=new a.x}ngOnDestroy(){this.globalStoreService.emitAction("HIDE",{delay:0}),this.unSubscribe$.next(),this.unSubscribe$.complete()}ngOnInit(){var e=this;return(0,d.Z)(function*(){e.globalStoreService.emitAction("SHOW",{hidding:!1}),e.activatedRoute.data.pipe((0,T.R)(e.unSubscribe$)).subscribe(function(){var t=(0,d.Z)(function*(o){if(null==o||null==o.config)throw new Error("You must provide a Loader configuration. Did you implement the LoaderResolver ?");const{wrapperKey:n,microfrontendKeys:s,initModel:f}=o.config,p=e.activatedRoute.routeConfig;if(!(yield e.appInitService.loadMicrofrontends(n.toString(),p,s,f)))throw new Error("Error during microfrontends router injection. Check your loader configuration");e.reloadCurrentRoute()});return function(o){return t.apply(this,arguments)}}())})()}reloadCurrentRoute(){const e=this.router.url;this.router.resetConfig(this.router.config),e.includes("#")?this.router.navigate([location.pathname],{fragment:location.hash.split("#")[1]}):this.router.navigate([e])}static#e=this.\u0275fac=function(t){return new(t||r)(l.\u0275\u0275directiveInject(_.Router),l.\u0275\u0275directiveInject(Be),l.\u0275\u0275directiveInject(Ae),l.\u0275\u0275directiveInject(_.ActivatedRoute))};static#t=this.\u0275cmp=l.\u0275\u0275defineComponent({type:r,selectors:[["bl-microfront-loader"]],decls:0,vars:0,template:function(t,o){},encapsulation:2})}return r})();function Jr(r,S){const e=(t,o)=>()=>{localStorage.setItem("ASKED_ROUTE",location.href.split(location.origin)[1]),S&&t.dispatch(ze({name:S.toString()})),o.events.subscribe(n=>{n instanceof _.NavigationEnd&&(t.dispatch(tt({key:n.urlAfterRedirects.split("/")[1]})),t.dispatch(qe({path:n.urlAfterRedirects}))),n instanceof _.RouteConfigLoadStart?t.dispatch(be({hidding:!1})):n instanceof _.RouteConfigLoadEnd&&t.dispatch(ye({delay:0})),e instanceof _.NavigationError&&e.error&&"ChunkLoadError"==e.error.name&&(r.DispatchAction("ActionStore",We({actionType:"SHOW_TOASTER",payload:{toasterType:1,message:"Erreur lors du chargement du module"}})),r.DispatchAction("ActionStore",We({actionType:"HIDE",payload:{}})))}),r.CreateStore("ActionStore",Pt),r.CreateStore("GlobalStore",Dt),r.RegisterGlobalActions("ActionStore",[Ve,Ke]),r.RegisterGlobalActions("GlobalStore",[Ze]),r.Subscribe("ActionStore",n=>{let s=n.action;if(s){let f=(0,h.createAction)(s.actionType,(0,h.props)());t.dispatch(f({...s.payload})),r.DispatchAction("ActionStore",wt())}}),t.select(re).subscribe(n=>{r.DispatchAction("GlobalStore",Ee({stateName:"_microfrontendState",payload:n}))}),t.select(br).subscribe(n=>{r.DispatchAction("GlobalStore",Ee({stateName:"_translateState",payload:n}))}),t.select(Zr).subscribe(n=>{r.DispatchAction("GlobalStore",Ee({stateName:"_modulesState",payload:n}))}),t.select(Lt).subscribe(n=>{r.DispatchAction("GlobalStore",Ee({stateName:"_routingTreeState",payload:n}))}),t.select(at).subscribe(n=>{r.DispatchAction("GlobalStore",Ee({stateName:"_spinnerState",payload:n}))}),t.select(Nr).subscribe(n=>{r.DispatchAction("GlobalStore",Ee({stateName:"_toasterState",payload:n}))})};return e}const wn=[Yr,zr,Me,Ue,ct],Qr=[Ne,Wr],qr=[Ie,ge,Cr,lt,gr,Mr],en=[Ae,Fe,Be,Ge,Hr,kr,{provide:ht.ViewportScroller,useClass:Xr}],tn=[h.StoreModule.forFeature("_microfrontendState",mr),h.StoreModule.forFeature("_modulesState",Kr),h.StoreModule.forFeature("_routingTreeState",xr),h.StoreModule.forFeature("_spinnerState",Rr),h.StoreModule.forFeature("_toasterState",Ir),h.StoreModule.forFeature("_translateState",Tr)],rn=[V.EffectsModule.forFeature([Gr,Ur,Br,Vr,Fr,_r])];let Dn=(()=>{class r{static forRoot(e){return{ngModule:r,providers:[{provide:Ot,useValue:e.log},{provide:l.APP_INITIALIZER,useFactory:Jr(v.GlobalStore.Get(!1),e.shellName),multi:!0,deps:[h.Store,_.Router]}]}}static#e=this.\u0275fac=function(t){return new(t||r)};static#t=this.\u0275mod=l.\u0275\u0275defineNgModule({type:r});static#r=this.\u0275inj=l.\u0275\u0275defineInjector({providers:[...en,...Qr,...qr],imports:[ht.CommonModule,h.StoreModule,V.EffectsModule,_.RouterModule,Z.JF,xt.TranslateModule,$t.Rh.forRoot({positionClass:"toast-bottom-right",timeOut:5e3}),on.Cl,tn,rn]})}return r})();class Pn{}class jn{}}}]);